(this.webpackJsonpkitewatch=this.webpackJsonpkitewatch||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),o=a.n(r),s=(a(14),a(1)),c=a(2),i=a(5),u=a(3),m=a(4),d=(a(6),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.kitedata,a=e.symbolList,n=e.kitePerfData,r=e.onTableRowclick,o=e.tableId,s=[];return t&&(s=a.filter((function(e){return"SEPERATOR"==e||void 0!=t.ticks[e]}))),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Change"),l.a.createElement("th",null,"LTP"))),l.a.createElement("tbody",null,s.map((function(e,a){return l.a.createElement(y,{tableId:o,onTableRowclick:r,key:e+a,kitedata:t,kitePerfData:n,symbol:e})}))))}}]),a}(l.a.Component)),y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).openStockInfo=function(){n.props.onTableRowclick(n.props.symbol,n.props.tableId)},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.kitedata,a=e.symbol,n=e.kitePerfData,r=(e.onTableRowclick,e.tableId,"SEPERATOR"==a),o="";t.ticks[a]&&(o=t.ticks[a].change<0?"red":"green");var s={};return n&&n[a]&&(s.backgroundColor=n[a].color),l.a.createElement("tr",{onClick:this.openStockInfo},!r&&l.a.createElement("td",{style:s},t.ticks[a].name),!r&&l.a.createElement("td",{className:o},t.ticks[a].change.toFixed(2)),!r&&l.a.createElement("td",null,t.ticks[a].lastTradedPrice))}}]),a}(l.a.Component),p=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.investingdata;return l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Change"))),l.a.createElement("tbody",null,e.index.map((function(t,a){return l.a.createElement(b,{key:t[0]+a,investingdata:e,data:t})}))))}}]),a}(l.a.Component),b=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e[13].startsWith("-")?"red":"green";return l.a.createElement("tr",null,l.a.createElement("td",null,e[0]),l.a.createElement("td",{className:t},e[13]))}}]),a}(l.a.Component),E=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.positionsdata,a=e.holdingsdata,n=0,r=0,o=0;if(a&&a.data&&t&&t.data){for(var s=0;s<a.data.length;s++){var c=a.data[s];n+=c.quantity+c.t1_quantity}if(t.data.net)for(var i=0;i<t.data.net.length;i++){var u=t.data.net[i];"CNC"==u.product&&(u.quantity>0?r+=u.quantity:o+=u.quantity)}}a.data.sort((function(e,t){return e.day_change_percentage-t.day_change_percentage}));for(var m,d=0,y=0,p=0;p<a.data.length;p++){var b=a.data[p];d+=(b.quantity+b.t1_quantity)*b.last_price,y+=(b.quantity+b.t1_quantity)*b.average_price}var E=(m=Math.round(d-y))<0?"red":"green";return document.title=Math.round(m/1e3)+"K ( "+(100*m/y).toFixed(2)+"%) ",l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Change"))),l.a.createElement("tbody",null,l.a.createElement("tr",{key:"summary"},l.a.createElement("td",{colSpan:"2",className:"summaryRow"},l.a.createElement("span",{className:"totalValue"},(d/1e5).toFixed(2)),"L\xa0\xa0\xa0",l.a.createElement("span",{className:E},"".concat(Math.round(m),"(").concat((100*m/y).toFixed(2),"%)")))),l.a.createElement("tr",{key:"position"},l.a.createElement("td",{colSpan:"2",className:"positionRow"},l.a.createElement("span",null,n,"\xa0|",r,"\xa0|",o,"\xa0\xa0=\xa0",n+r))),a.data.map((function(e,t){return l.a.createElement(h,{key:e.tradingsymbol+t,data:e})}))))}}]),a}(l.a.Component),h=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.data,t=(e.quantity+e.t1_quantity)*e.last_price-(e.quantity+e.t1_quantity)*e.average_price,a=e.day_change_percentage<0?"red":"green",n=t<0?"red":"green";return l.a.createElement("tr",null,l.a.createElement("td",null,e.tradingsymbol,l.a.createElement("span",{className:"holdQty"},"(",e.quantity+e.t1_quantity,")"),"\xa0\xa0",l.a.createElement("span",{className:"holdValue"},"(",Math.round((e.quantity+e.t1_quantity)*e.last_price/1e3),")")),l.a.createElement("td",null,l.a.createElement("span",{className:"last_price"},e.last_price.toFixed(2)),"\xa0\xa0",l.a.createElement("span",{className:"holdDayChg "+a},e.day_change_percentage.toFixed(2)),l.a.createElement("br",null),l.a.createElement("span",{className:"holdPL "+n},Math.round(t)),"\xa0\xa0",l.a.createElement("span",{className:"holdPLPec "+n},(100*t/((e.quantity+e.t1_quantity)*e.average_price)).toFixed(2),"%")))}}]),a}(l.a.Component),f=function(e){e.order_type="LIMIT",e.product="CNC",e.validity="DAY",e.disclosed_quantity=0,e.trigger_price=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},k=function(e){e.order_type="LIMIT",e.product="MIS",e.validity="DAY",e.disclosed_quantity=0,e.trigger_price=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},v=function(e,t,a){var n=[];for(var l in e)n.push(l+"="+e[l]);var r=n.join("&");fetch("https://kite.zerodha.com/oms/orders/regular",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey},body:r}).then((function(e){return e.json()})).then((function(e){console.info(e),"success"==e.status?t(e):"error"==e.status&&a(e)})).catch((function(e){console.error(e),a(e)}))},S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).fillInputWithLatestPrice=function(){var e=n.props,t=e.kitedata,a=e.symbol,l=t.ticks[a].depth;l&&(n.setState({orderStatus:t.ticks[a].exchange+"::"+a,orderStatusStyle:{},buyQuantity:1,buyPrice:l.buy[0].price,sellQuantity:1,sellPrice:l.sell[0].price}),n.setFocusonOrderWindow())},n.setFocusonOrderWindow=function(){setTimeout((function(){n.textInputBuyQty?n.textInputBuyQty.select():n.textInputSellQty&&n.textInputSellQty.select()}),5)},n.updaetOrderStatus=function(e){n.setState({orderStatus:e})},n.onInputValueChange=function(e){var t=n.state,a=t.buyQuantity,l=t.buyPrice,r=t.sellQuantity,o=t.sellPrice,s=(t.orderStatus,t.orderStatusStyle,n.props),c=s.kitedata,i=s.symbol;"buyQuantity"==e.target.name?(a=e.target.value,n.setState({buyQuantity:a,orderStatusStyle:{color:"green"},orderStatus:c.ticks[i].exchange+"::"+i+" ( Q-> "+a+" )  ( P-> "+l+" )"})):"buyPrice"==e.target.name?(l=e.target.value,n.setState({buyPrice:l,orderStatusStyle:{color:"green"},orderStatus:c.ticks[i].exchange+"::"+i+" ( Q-> "+a+" )  ( P-> "+l+" )"})):"sellQuantity"==e.target.name?(r=e.target.value,n.setState({sellQuantity:r,orderStatusStyle:{color:"red"},orderStatus:c.ticks[i].exchange+"::"+i+" ( Q-> "+r+" )  ( P-> "+o+" )"})):"sellPrice"==e.target.name&&(o=e.target.value,n.setState({sellPrice:o,orderStatusStyle:{color:"red"},orderStatus:c.ticks[i].exchange+"::"+i+" ( Q-> "+r+" )  ( P-> "+o+" )"}))},n.toogleBuyView=function(){var e=n.state.orderWindowView;e.buyView=!e.buyView,n.setState({orderWindowView:e}),localStorage.setItem("orderWindowView.json",JSON.stringify(e))},n.toogleSellView=function(){var e=n.state.orderWindowView;e.sellView=!e.sellView,n.setState({orderWindowView:e}),localStorage.setItem("orderWindowView.json",JSON.stringify(e))},n.onOrderSuccess=function(e){n.setState({orderStatus:e.data.order_id,buyQuantity:0,sellQuantity:0}),n.setFocusonOrderWindow()},n.onOrderError=function(e){n.setState({orderStatus:e.message,buyQuantity:0,sellQuantity:0}),n.setFocusonOrderWindow()},n.sendBuyOrderRequest=function(){var e,t,a,l=n.state,r=l.buyQuantity,o=l.buyPrice,s=n.props,c=s.kitedata,i=s.symbol;e={exchange:c.ticks[i].exchange,tradingsymbol:i,price:o,quantity:r,transaction_type:"BUY",order_type:"LIMIT"},t=n.onOrderSuccess,a=n.onOrderError,e.transaction_type="BUY",f(e),v(e,t,a)},n.sendSellOrderRequest=function(){var e,t,a,l=n.state,r=l.sellQuantity,o=l.sellPrice,s=n.props,c=s.kitedata,i=s.symbol;e={exchange:c.ticks[i].exchange,tradingsymbol:i,price:o,quantity:r,transaction_type:"SELL",order_type:"LIMIT"},t=n.onOrderSuccess,a=n.onOrderError,e.transaction_type="SELL",f(e),v(e,t,a)};var l={buyView:!0,sellView:!0};return l=void 0!=localStorage.getItem("orderWindowView.json")?JSON.parse(localStorage.getItem("orderWindowView.json")):l,n.state={orderWindowView:l},n.textInputBuyQty=null,n.textInputSellQty=null,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fillInputWithLatestPrice()}},{key:"componentDidUpdate",value:function(e){e.symbol!=this.props.symbol&&this.fillInputWithLatestPrice()}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=t.symbol,r=this.state,o=r.buyQuantity,s=r.buyPrice,c=r.sellQuantity,i=r.sellPrice,u=r.orderStatus,m=r.orderStatusStyle,d=r.orderWindowView,y=a.ticks[n].depth;return l.a.createElement("div",{className:"orderView"},l.a.createElement("button",{className:"favButton orderToggleBtn",onClick:this.toogleSellView,type:"button"},"SW"),l.a.createElement("button",{className:"favButton orderToggleBtn",onClick:this.toogleBuyView,type:"button"},"BW"),l.a.createElement("div",{className:"line"}),l.a.createElement("div",{style:m,className:"orderStatusView"},u),l.a.createElement("br",null),d.buyView&&y&&l.a.createElement("div",{className:"buyOrderView",onKeyUp:function(t){13===t.keyCode&&e.sendBuyOrderRequest()}},l.a.createElement("label",{for:"buyQuantity"},"Q:"),l.a.createElement("input",{type:"number",ref:function(t){return e.textInputBuyQty=t},onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"buyQuantity",step:1,name:"buyQuantity",min:"1",max:"1000",value:o}),l.a.createElement("label",{for:"buyPrice"},"P:"),l.a.createElement("input",{type:"number",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"buyPrice",step:.2,name:"buyPrice",min:"1",max:"10000",value:s}),l.a.createElement("button",{className:"buyButton",onClick:this.sendBuyOrderRequest}," BUY ")),d.sellView&&y&&l.a.createElement("div",{className:"sellOrderView",onKeyUp:function(t){13===t.keyCode&&e.sendSellOrderRequest()}},l.a.createElement("label",{for:"sellQuantity"},"Q:"),l.a.createElement("input",{type:"number",ref:function(t){return e.textInputSellQty=t},onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"sellQuantity",step:1,name:"sellQuantity",min:"1",max:"1000",value:c}),l.a.createElement("label",{for:"sellPrice"},"P:"),l.a.createElement("input",{type:"number",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"sellPrice",step:.2,name:"sellPrice",min:"1",max:"10000",value:i}),l.a.createElement("button",{className:"sellButton",onClick:this.sendSellOrderRequest}," SELL ")))}}]),a}(l.a.Component),g=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onColorInput=function(e){var t=n.props,a=t.stockInfo;(0,t.updateKitePerfData)(a.symbol,"color",e.target.value)},n.fetchHistoricalData=function(){var e=n.props.kitedata.ticks[n.props.stockInfo.symbol],t=new Date;t.setDate(t.getDate()-2e3),fetch("https://api.kite.trade/instruments/historical/"+e.token+"/day?from="+t.toISOString().split("T")[0]+"&to="+(new Date).toISOString().split("T")[0],{method:"GET",headers:{"X-Kite-Version":"3","Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey}}).then((function(e){return e.json()})).then(function(e){this.setState({hCandles:e.data.candles})}.bind(Object(i.a)(n))).catch((function(e){console.error(e)}))},n.state={},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetchHistoricalData()}},{key:"componentDidUpdate",value:function(e){e.stockInfo.symbol!==this.props.stockInfo.symbol&&this.fetchHistoricalData()}},{key:"render",value:function(){var e,t,a,n,r,o,s,c,i,u,m,d,y=this.state.hCandles,p=this.props,b=p.kitedata,E=(p.updateKitePerfData,p.stockInfo),h=p.hideStokInfo,f=p.addToFavList,k=p.removeFromFavList,v=E.symbol,g=E.tableId;if(y){var O=y,I=O.length-1,N=O[I][4];e=Number.parseInt(100*-(O[I-1][4]-N)/O[I-1][4]),t=Number.parseInt(100*-(O[I-2][4]-N)/O[I-2][4]),a=Number.parseInt(100*-(O[I-3][4]-N)/O[I-3][4]),n=Number.parseInt(100*-(O[I-5][4]-N)/O[I-5][4]),r=Number.parseInt(100*-(O[I-10][4]-N)/O[I-10][4]),I-23>0&&(o=Number.parseInt(100*-(O[I-23][4]-N)/O[I-23][4])),I-140>0&&(s=Number.parseInt(100*-(O[I-140][4]-N)/O[I-140][4])),I-269>0&&(c=Number.parseInt(100*-(O[I-269][4]-N)/O[I-269][4])),I-540>0&&(i=Number.parseInt(100*-(O[I-540][4]-N)/O[I-540][4])),I-807>0&&(u=Number.parseInt(100*-(O[I-807][4]-N)/O[I-807][4])),I-1076>0&&(m=Number.parseInt(100*-(O[I-1076][4]-N)/O[I-1076][4])),I-1150>0&&(d=Number.parseInt(100*-(O[0][4]-N)/O[0][4]))}var w="https://kite.zerodha.com/chart/ext/tvc/NSE/"+b.ticks[v].tradingsymbol+"/"+b.ticks[v].token,C=b.ticks[v].depth;return l.a.createElement("div",{className:"stockInfo"},l.a.createElement("p",{onDoubleClick:h,className:"name"},b.ticks[v].name),l.a.createElement("table",{className:"stockInfoTable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Symbol"),l.a.createElement("td",null,l.a.createElement("a",{rel:"noreferrer",target:"_blank",href:w},b.ticks[v].tradingsymbol))),l.a.createElement("tr",null,l.a.createElement("td",null,"LTP"),l.a.createElement("td",null,b.ticks[v].lastTradedPrice)),l.a.createElement("tr",null,l.a.createElement("td",null,"Change"),l.a.createElement("td",null,b.ticks[v].change.toFixed(2),"%")),l.a.createElement("tr",null,l.a.createElement("td",null,"Volume"),l.a.createElement("td",null,b.ticks[v].volumeTradedToday)),l.a.createElement("tr",null,l.a.createElement("td",null,"High"),l.a.createElement("td",null,b.ticks[v].highPrice)),l.a.createElement("tr",null,l.a.createElement("td",null,"Low"),l.a.createElement("td",null,b.ticks[v].lowPrice)),l.a.createElement("tr",null,l.a.createElement("td",null,"Open"),l.a.createElement("td",null,b.ticks[v].openPrice)),l.a.createElement("tr",null,l.a.createElement("td",null,"Close"),l.a.createElement("td",null,b.ticks[v].closePrice)),l.a.createElement("tr",null,l.a.createElement("td",null,"Color"),l.a.createElement("td",null,l.a.createElement("input",{onInput:this.onColorInput,type:"color",className:"favcolor",name:"favcolor",value:"#ff0000"}))))),y&&l.a.createElement("table",{className:"stockInfoTable historyTable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"1D"),l.a.createElement("td",null,e)),l.a.createElement("tr",null,l.a.createElement("td",null,"2D"),l.a.createElement("td",null,t)),l.a.createElement("tr",null,l.a.createElement("td",null,"3D"),l.a.createElement("td",null,a)),l.a.createElement("tr",null,l.a.createElement("td",null,"1W"),l.a.createElement("td",null,n)),l.a.createElement("tr",null,l.a.createElement("td",null,"2W"),l.a.createElement("td",null,r)),l.a.createElement("tr",null,l.a.createElement("td",null,"1M"),l.a.createElement("td",null,o)),l.a.createElement("tr",null,l.a.createElement("td",null,"6M"),l.a.createElement("td",null,s)),l.a.createElement("tr",null,l.a.createElement("td",null,"1Y"),l.a.createElement("td",null,c)),l.a.createElement("tr",null,l.a.createElement("td",null,"2Y"),l.a.createElement("td",null,i)),l.a.createElement("tr",null,l.a.createElement("td",null,"3Y"),l.a.createElement("td",null,u)),l.a.createElement("tr",null,l.a.createElement("td",null,"4Y"),l.a.createElement("td",null,m)),l.a.createElement("tr",null,l.a.createElement("td",null,"5Y"),l.a.createElement("td",null,d)))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{className:"favButton green",onClick:function(e){f(v,"0")},type:"button"},"A 0"),l.a.createElement("button",{className:"favButton green",onClick:function(e){f(v,"MIS")},type:"button"},"MIS"),void 0!=g&&l.a.createElement("button",{className:"favButton red",onClick:function(e){k(v,g)},type:"button"},"R ",g),l.a.createElement(S,{kitedata:b,symbol:v}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),C&&5==C.buy.length&&5==C.sell.length&&l.a.createElement("table",{className:"bidTable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"blue"},C.buy[0].price),l.a.createElement("td",{className:"blue"},C.buy[0].quantity),l.a.createElement("td",{className:"red"},C.sell[0].price),l.a.createElement("td",{className:"red"},C.sell[0].quantity)),l.a.createElement("tr",null,l.a.createElement("td",{className:"blue"},C.buy[1].price),l.a.createElement("td",{className:"blue"},C.buy[1].quantity),l.a.createElement("td",{className:"red"},C.sell[1].price),l.a.createElement("td",{className:"red"},C.sell[1].quantity)),l.a.createElement("tr",null,l.a.createElement("td",{className:"blue"},C.buy[2].price),l.a.createElement("td",{className:"blue"},C.buy[2].quantity),l.a.createElement("td",{className:"red"},C.sell[2].price),l.a.createElement("td",{className:"red"},C.sell[2].quantity)),l.a.createElement("tr",null,l.a.createElement("td",{className:"blue"},C.buy[3].price),l.a.createElement("td",{className:"blue"},C.buy[3].quantity),l.a.createElement("td",{className:"red"},C.sell[3].price),l.a.createElement("td",{className:"red"},C.sell[3].quantity)),l.a.createElement("tr",null,l.a.createElement("td",{className:"blue"},C.buy[4].price),l.a.createElement("td",{className:"blue"},C.buy[4].quantity),l.a.createElement("td",{className:"red"},C.sell[4].price),l.a.createElement("td",{className:"red"},C.sell[4].quantity)),l.a.createElement("tr",null),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2",className:"blue"},b.ticks[v].totalBuyQuantity),l.a.createElement("td",null),l.a.createElement("td",{colSpan:"2",className:"red"},b.ticks[v].totalSellQuantity),l.a.createElement("td",null)))))}}]),a}(l.a.Component),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateOrderStatus=function(e){n.setState({orderStatus:e})},n.state={},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=t.kiteBasketOrderData,r=t.hideBasketOrderDialog,o=t.tableId,s=this.state.orderStatus;return l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"orderStatusView"},s),l.a.createElement("span",{onClick:r,className:"close"},"\xd7"),l.a.createElement("div",{className:"basket-orders"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Change"),l.a.createElement("th",null,"LTP"),l.a.createElement("th",null,"BID"),l.a.createElement("th",null,"ASK"),l.a.createElement("th",null,"Qty"),l.a.createElement("th",null,"Price"),l.a.createElement("th",null,"BUY"),l.a.createElement("th",null,"SELL"))),l.a.createElement("tbody",null,n.map((function(t,n){return l.a.createElement(I,{tableId:o,updateOrderStatus:e.updateOrderStatus,key:t+n,kitedata:a,symbol:t})})))))))}}]),a}(l.a.Component),I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).fillInputWithLatestPrice=function(){var e=n.props,t=e.kitedata,a=e.symbol;t.ticks[a].depth&&n.setState({quantity:0,price:t.ticks[a].lastTradedPrice})},n.onInputValueChange=function(e){var t=n.state,a=t.quantity,l=t.price;"quantity"==e.target.name?(a=e.target.value,n.setState({quantity:a})):"price"==e.target.name&&(l=e.target.value,n.setState({price:l}))},n.onOrderSuccess=function(e){(0,n.props.updateOrderStatus)(e.data.order_id),n.setState({quantity:0})},n.onOrderError=function(e){(0,n.props.updateOrderStatus)(e.message),n.setState({quantity:0})},n.sendBuyOrderRequest=function(){var e,t,a,l=n.state,r=l.quantity,o=l.price,s=n.props,c=s.kitedata,i=s.symbol,u=s.updateOrderStatus;e={exchange:c.ticks[i].exchange,tradingsymbol:i,price:o,quantity:r,transaction_type:"BUY",order_type:"LIMIT"},t=n.onOrderSuccess,a=n.onOrderError,e.transaction_type="BUY",k(e),v(e,t,a),u(i+" -> BUY  -> LIMIT -> MIS ->        Q: "+r+"   P: "+o)},n.sendSellOrderRequest=function(){var e,t,a,l=n.state,r=l.quantity,o=l.price,s=n.props,c=s.kitedata,i=s.symbol,u=s.updateOrderStatus;e={exchange:c.ticks[i].exchange,tradingsymbol:i,price:o,quantity:r,transaction_type:"SELL",order_type:"LIMIT"},t=n.onOrderSuccess,a=n.onOrderError,e.transaction_type="SELL",k(e),v(e,t,a),u(i+" -> SELL  -> LIMIT -> MIS ->        Q: "+r+"   P: "+o)},n.state={},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fillInputWithLatestPrice()}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.kitedata,a=e.symbol,n=(e.tableId,this.state),r=n.quantity,o=n.price,s="";return t.ticks[a]&&(s=t.ticks[a].change<0?"red":"green"),l.a.createElement("tr",null,l.a.createElement("td",null,t.ticks[a].exchange+"::"+a),l.a.createElement("td",{className:s},t.ticks[a].change.toFixed(2),"%"),l.a.createElement("td",null,t.ticks[a].lastTradedPrice),l.a.createElement("td",{className:"bidAskCell"},t.ticks[a].depth.buy[0].price,"\xa0/\xa0",l.a.createElement("span",null,t.ticks[a].depth.buy[0].quantity)),l.a.createElement("td",{className:"bidAskCell"},t.ticks[a].depth.sell[0].price,"\xa0/\xa0",l.a.createElement("span",null,t.ticks[a].depth.sell[0].quantity)),l.a.createElement("td",null,l.a.createElement("input",{type:"number",autoComplete:"off",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"quantity",step:1,name:"quantity",min:"1",max:"1000",value:r})),l.a.createElement("td",null,l.a.createElement("input",{type:"number",autoComplete:"off",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"price",step:.2,name:"price",min:"1",max:"10000",value:o})),l.a.createElement("td",null,l.a.createElement("button",{className:"buyButton",onClick:this.sendBuyOrderRequest}," BUY ")),l.a.createElement("td",null," ",l.a.createElement("button",{className:"sellButton",onClick:this.sendSellOrderRequest}," SELL ")))}}]),a}(l.a.Component),N=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).showBasketOrderDialog=function(){n.setState({isShowBasketOrderDialog:!0})},n.hideBasketOrderDialog=function(){n.setState({isShowBasketOrderDialog:void 0})},n.hideStokInfo=function(){n.setState({stockInfo:void 0})},n.escFunction=function(e){27===e.keyCode&&(n.hideStokInfo(),n.hideBasketOrderDialog())},n.refreshData=function(){fetch("http://localhost:9000/kiteticks.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.kitedata=e}.bind(Object(i.a)(n))).catch((function(e){console.error(e)})),fetch("http://localhost:9000/changes.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.investingdata=e}.bind(Object(i.a)(n))).catch((function(e){console.error(e)})),fetch("http://localhost:9000/positions.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.positionsdata=e}.bind(Object(i.a)(n))).catch((function(e){console.error(e)})),fetch("http://localhost:9000/holdings.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.holdingsdata=e}.bind(Object(i.a)(n))).catch((function(e){console.error(e)})),fetch("http://localhost:9000/kiteAllSymbols.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.kiteAllSymbols=e}.bind(Object(i.a)(n))).catch((function(e){console.error(e)})),n.setState({kitedata:n.kitedata,investingdata:n.investingdata,positionsdata:n.positionsdata,holdingsdata:n.holdingsdata,kiteAllSymbols:n.kiteAllSymbols})},n.onTableRowclick=function(e,t){var a=n.state.symbolSelector;a.isShow&&[0,1,2,3].includes(t)&&(a.cursor=e,document.getElementById("portfolioInput").value=t),n.setState({stockInfo:{symbol:e,tableId:t},symbolSelector:a})},n.onSelectorInput=function(e){var t=document.getElementById("inputSymbol").value;if(n.state.kiteAllSymbols.allSymbols.filter((function(e){return e.tradingsymbol.toUpperCase()==t.toUpperCase()})).length>0||"SEPERATOR"==t.toUpperCase()){var a=document.getElementById("portfolioInput").value,l=n.state.symbolSelector.isAdd;["0","1","2","3"].includes(a)&&(l?n.addToFavList(t,a):n.removeFromFavList(t,a)),document.getElementById("inputSymbol").select()}},n.getFavSymbols=function(e){switch(e){case"0":return n.state.favSymbols;case"1":return n.state.favSymbols1;case"2":return n.state.favSymbols2;case"3":return n.state.favSymbols3;case"MIS":return n.state.kiteBasketOrderData}},n.setFavSymbols=function(e,t){switch(e){case"0":n.setState({favSymbols:t}),localStorage.setItem("kite_favSymbols",JSON.stringify(t));break;case"1":n.setState({favSymbols1:t}),localStorage.setItem("kite_favSymbols1",JSON.stringify(t));break;case"2":n.setState({favSymbols2:t}),localStorage.setItem("kite_favSymbols2",JSON.stringify(t));break;case"3":n.setState({favSymbols3:t}),localStorage.setItem("kite_favSymbols3",JSON.stringify(t));break;case"MIS":n.setState({kiteBasketOrderData:t}),localStorage.setItem("kiteBasketOrderData.json",JSON.stringify(t))}},n.addToFavList=function(e,t){t=void 0==t?"":t+"";var a=n.getFavSymbols(t);if("SEPERATOR"!=e&&(a=a.filter((function(t,a){return t!=e}))),"SEPERATOR"==e||n.state.kitedata.ticks[e]){var l=n.state.symbolSelector.cursor?n.state.symbolSelector.cursor:"",r=a.indexOf(l);r>=0?a.splice(r,0,e):a.unshift(e),n.setFavSymbols(t,a)}"SEPERATOR"==e||n.state.kitedata.ticks[e]||console.error(e)},n.removeFromFavList=function(e,t){t=void 0==t?"":t+"";var a=n.getFavSymbols(t);if("SEPERATOR"!=e)a=a.filter((function(t,a){return t!=e}));else{var l=n.state.symbolSelector.cursor?n.state.symbolSelector.cursor:"",r=a.indexOf(l);a.splice(r+1,1)}n.setFavSymbols(t,a)},n.updateKitePerfData=function(e,t,a){var l=n.state.kitePerfData;void 0==l[e]&&(l[e]={}),l[e][t]=a,localStorage.setItem("kitePerfData.json",JSON.stringify(l)),n.setState({kitePerfData:l})};var l=void 0!=localStorage.getItem("kite_favSymbols")?JSON.parse(localStorage.getItem("kite_favSymbols")):[],r=void 0!=localStorage.getItem("kite_favSymbols1")?JSON.parse(localStorage.getItem("kite_favSymbols1")):[],o=void 0!=localStorage.getItem("kite_favSymbols2")?JSON.parse(localStorage.getItem("kite_favSymbols2")):[],c=void 0!=localStorage.getItem("kite_favSymbols3")?JSON.parse(localStorage.getItem("kite_favSymbols3")):[],u=void 0!=localStorage.getItem("kitePerfData.json")?JSON.parse(localStorage.getItem("kitePerfData.json")):[],m=void 0!=localStorage.getItem("kiteBasketOrderData.json")?JSON.parse(localStorage.getItem("kiteBasketOrderData.json")):[];return n.state={favSymbols:l,favSymbols1:r,favSymbols2:o,favSymbols3:c,kitePerfData:u,kiteBasketOrderData:m,symbolSelector:{cursor:void 0,isAdd:!0,isShow:!1}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.refreshData,2e3),document.addEventListener("keyup",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.escFunction,!1),clearInterval(this.interval)}},{key:"render",value:function(){var e=this,t=this.state,a=t.kitedata,n=t.investingdata,r=t.positionsdata,o=t.holdingsdata,s=t.favSymbols,c=t.favSymbols1,i=t.favSymbols2,u=t.favSymbols3,m=t.kitePerfData,y=t.stockInfo,b=t.isShowBasketOrderDialog,h=t.kiteBasketOrderData,f=t.symbolSelector,k=t.kiteAllSymbols,v=[],S=[];if(a){for(var I=Object.keys(a.ticks),N=[],w=0;w<I.length;w++)"NFO"!=a.ticks[I[w]].exchange&&N.push(I[w]);N.sort((function(e,t){return a.ticks[t].change-a.ticks[e].change}));for(var C=0;C<N.length&&!(a.ticks[N[C]].change<2);C++)v.push(N[C]);for(var P=N.length-1;P>=0&&!(a.ticks[N[P]].change>-2);P--)S.push(N[P])}var D={};if(a&&n){var j=n.time,T=a.time,_=new Date,q=60*_.getHours()+_.getMinutes();Math.abs(q-j)>5||Math.abs(q-T)>5?D.display="block":D.display="none"}return l.a.createElement("div",null,l.a.createElement("div",{style:D,className:"feed-status"}),a&&l.a.createElement("div",{className:"tableContainer holding"},l.a.createElement(E,{positionsdata:r,holdingsdata:o})),a&&l.a.createElement("div",{className:"tableContainer loser"},l.a.createElement(d,{onTableRowclick:this.onTableRowclick,kitedata:a,symbolList:v})),a&&l.a.createElement("div",{className:"tableContainer gainers"},l.a.createElement(d,{onTableRowclick:this.onTableRowclick,kitedata:a,symbolList:S})),a&&l.a.createElement("div",{className:"tableContainer watchlistclass"},l.a.createElement(d,{tableId:0,onTableRowclick:this.onTableRowclick,kitePerfData:m,kitedata:a,symbolList:s})),a&&l.a.createElement("div",{className:"tableContainer watchlistclass"},l.a.createElement(d,{tableId:1,onTableRowclick:this.onTableRowclick,kitePerfData:m,kitedata:a,symbolList:c})),a&&l.a.createElement("div",{className:"tableContainer watchlistclass"},l.a.createElement(d,{tableId:2,onTableRowclick:this.onTableRowclick,kitePerfData:m,kitedata:a,symbolList:i})),a&&l.a.createElement("div",{className:"tableContainer watchlistclass"},l.a.createElement(d,{tableId:3,onTableRowclick:this.onTableRowclick,kitePerfData:m,kitedata:a,symbolList:u})),a&&l.a.createElement("div",{className:"tableContainer index"},l.a.createElement(p,{investingdata:n})),y&&l.a.createElement(g,{addToFavList:this.addToFavList,removeFromFavList:this.removeFromFavList,hideStokInfo:this.hideStokInfo,stockInfo:y,updateKitePerfData:this.updateKitePerfData,kitePerfData:m,kitedata:a}),b&&l.a.createElement(O,{kiteBasketOrderData:h,hideBasketOrderDialog:this.hideBasketOrderDialog,kitedata:a}),l.a.createElement("div",{className:"tool-bar"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(t){f.isShow=!f.isShow,e.setState({symbolSelector:f})}},"SEL"),l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:this.showBasketOrderDialog},"MIS")),f.isShow&&k&&l.a.createElement("div",{className:"symbolSelector"},l.a.createElement("button",{className:"addRemove",style:{backgroundColor:f.isAdd?"green":"red"},onClick:function(t){f.isAdd=!f.isAdd,e.setState({symbolSelector:f})},type:"button"},"ADD"),l.a.createElement("input",{type:"text",onInput:this.onSelectorInput,id:"inputSymbol",list:"inputdlist"}),l.a.createElement("datalist",{id:"inputdlist"},k.allSymbols.map((function(e,t){if("NFO"!=e.exchange)return l.a.createElement("option",{key:e.tradingsymbol,value:e.tradingsymbol},e.name);if("NIFTY"==e.name||"BANKNIFTY"==e.name){if("NFO-OPT"==e.segment){var a=e.name+" "+e.expiry.split(" ")[0]+" "+e.strike+" "+e.instrument_type+" | "+e.expiry.split(" ")[1]+" "+e.expiry.split(" ")[2];return l.a.createElement("option",{key:e.tradingsymbol,value:e.tradingsymbol},a)}if("NFO-FUT"==e.segment){var n=e.name+" "+e.expiry.split(" ")[0]+" "+e.expiry.split(" ")[1]+" "+e.instrument_type;return l.a.createElement("option",{key:e.tradingsymbol,value:e.tradingsymbol},n)}}})),l.a.createElement("option",{key:"SEPERATOR",value:"SEPERATOR"},"SEPERATOR")),l.a.createElement("input",{type:"text",id:"portfolioInput",list:"portfolioList"}),l.a.createElement("datalist",{id:"portfolioList"},l.a.createElement("option",{value:0},"0"),l.a.createElement("option",{value:1},"1"),l.a.createElement("option",{value:2},"2"),l.a.createElement("option",{value:3},"3")),l.a.createElement("label",{className:"cursor"},f.cursor)))}}]),a}(l.a.Component);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(N,null)),document.getElementById("root"))},6:function(e,t,a){},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.e8b5d13d.chunk.js.map