(this.webpackJsonpkitewatch=this.webpackJsonpkitewatch||[]).push([[0],{176:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(13),i=a.n(o),l=(a(69),a(2)),s=a(5),c=a(6),d=a(4),u=a(3),m=(a(7),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).bringRusultsComingTodayInView=function(){var e="tr[rowid='RESULT-DATE-"+(new Date).toISOString().split("T")[0]+"']";document.querySelectorAll(e)&&document.querySelectorAll(e)[0]&&document.querySelectorAll(e)[0].scrollIntoView()},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.kitedata,a=e.symbolList,n=e.kitePerfData,o=e.onTableRowclick,i=e.tableId,l=e.showToast,s=e.resultCalenderData,c=e.recentResultCalender,d=e.kiteBasketOrderData,u=e.tableName,m=[];return t&&(m=a.filter((function(e){return"SEPERATOR"==e||void 0!=t.ticks[e]}))),r.a.createElement("table",null,r.a.createElement("thead",null,!u&&r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Change"),r.a.createElement("th",null,"LTP")),u&&r.a.createElement("tr",null,r.a.createElement("th",{className:"tableName",colSpan:"3"},u))),r.a.createElement("tbody",null,m.map((function(e,a){return r.a.createElement(p,{showToast:l,tableId:i,onTableRowclick:o,key:e+a,kitedata:t,kitePerfData:n,symbol:e})})),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null),r.a.createElement("tr",null),r.a.createElement("tr",{onClick:this.bringRusultsComingTodayInView,rowId:"RES-RESCALENDER"},r.a.createElement("td",{colSpan:"3",style:{textAlign:"center",fontWeight:"bold"}},"RES CALENDER")),s.map((function(e,a){return r.a.createElement(p,{showToast:l,tableId:"RES",onTableRowclick:o,key:"RES-"+a+e,kitedata:t,kitePerfData:n,symbol:e})})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",style:{textAlign:"center"}},"UPCOMMING RESULTS")),Object.keys(c).map((function(e,a){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("tr",{rowId:"RESULT-DATE-"+e,key:e+a},r.a.createElement("td",{colSpan:"3",className:"resultDate"},new Date(e).toDateString())),c[e].map((function(e,a){return r.a.createElement(p,{showToast:l,onTableRowclick:o,key:"UPCOMMING-RES-"+a+e.symbol,kitedata:t,kitePerfData:n,symbol:e.symbol,inHolding:e.inHolding})})))}))),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null),r.a.createElement("tr",null),r.a.createElement("tr",{rowId:"MIS-MISSCRIPTS"},r.a.createElement("td",{colSpan:"3",style:{textAlign:"center",fontWeight:"bold"}},"MIS SCRIPTS")),d.map((function(e,a){return r.a.createElement(p,{showToast:l,tableId:"MIS",onTableRowclick:o,key:"MIS-"+a+e,kitedata:t,kitePerfData:n,symbol:e})})))))}}]),a}(r.a.Component)),p=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).openStockInfo=function(){n.props.onTableRowclick(n.props.symbol,n.props.tableId)},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.showToast){var t=this.props.symbol;"SEPERATOR"!=t&&e.symbol==t&&((e.kitedata.ticks[t].change<1.5&&this.props.kitedata.ticks[t].change>1.5||e.kitedata.ticks[t].change<3&&this.props.kitedata.ticks[t].change>3||e.kitedata.ticks[t].change<5&&this.props.kitedata.ticks[t].change>5||e.kitedata.ticks[t].change<8&&this.props.kitedata.ticks[t].change>8||e.kitedata.ticks[t].change<9.5&&this.props.kitedata.ticks[t].change>9.5||e.kitedata.ticks[t].change<13&&this.props.kitedata.ticks[t].change>13||e.kitedata.ticks[t].change<15&&this.props.kitedata.ticks[t].change>15)&&this.props.showToast(r.a.createElement("div",{onClick:this.openStockInfo,className:"green"},this.props.symbol+"  ->  "+this.props.kitedata.ticks[t].lastTradedPrice,"\xa0(",r.a.createElement("span",null,this.props.kitedata.ticks[t].change.toFixed(2)),"%)"),this.props.symbol),(e.kitedata.ticks[t].change>-1.5&&this.props.kitedata.ticks[t].change<-1.5||e.kitedata.ticks[t].change>-3&&this.props.kitedata.ticks[t].change<-3||e.kitedata.ticks[t].change>-5&&this.props.kitedata.ticks[t].change<-5||e.kitedata.ticks[t].change>-8&&this.props.kitedata.ticks[t].change<-8||e.kitedata.ticks[t].change>-9.5&&this.props.kitedata.ticks[t].change<-9.5||e.kitedata.ticks[t].change>-13&&this.props.kitedata.ticks[t].change<-13||e.kitedata.ticks[t].change>-15&&this.props.kitedata.ticks[t].change<-15)&&this.props.showToast(r.a.createElement("div",{onClick:this.openStockInfo,className:"red"},this.props.symbol+"  ->  "+this.props.kitedata.ticks[t].lastTradedPrice,"\xa0(",r.a.createElement("span",null,this.props.kitedata.ticks[t].change.toFixed(2)),"%)"),this.props.symbol))}}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=t.symbol,n=t.kitedata;return a!=e.symbol||"SEPERATOR"!=a&&Math.abs(n.ticks[a].lastTradedPrice-e.kitedata.ticks[a].lastTradedPrice)>.04}},{key:"render",value:function(){var e=this.props,t=e.kitedata,a=e.symbol,n=e.kitePerfData,o=(e.onTableRowclick,e.tableId),i=e.inHolding,l="SEPERATOR"==a,s="";t.ticks[a]&&(s=t.ticks[a].change<0?"red":"green");var c={};return n&&n[a]&&(c.backgroundColor=n[a].color),1==i&&(c.backgroundColor="lightgray"),r.a.createElement("tr",{onClick:this.openStockInfo,rowId:o?o+"-"+a:a},!l&&r.a.createElement("td",{style:c},t.ticks[a].name),!l&&r.a.createElement("td",{className:s},t.ticks[a].change.toFixed(2)),!l&&r.a.createElement("td",null,t.ticks[a].lastTradedPrice))}}]),a}(r.a.Component),h=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).rowOrder=[4,1,2,3,6,7,8,11,12,13],n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.investingdata;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Change"))),r.a.createElement("tbody",null,this.rowOrder.map((function(t,a){return r.a.createElement(y,{key:e.index[t][0]+a,investingdata:e,data:e.index[t]})}))))}}]),a}(r.a.Component),y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e[13].startsWith("-")?"red":"green";return r.a.createElement("tr",null,r.a.createElement("td",null,e[0]),r.a.createElement("td",{className:t},e[13]))}}]),a}(r.a.Component),f=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.positionsdata,a=e.holdingsdata,n=e.onTableRowclick,o=e.margin,i=e.kitedata,l=e.BSEtoNSEsymbolsMapping;if(a&&a.data)for(var s=0;s<a.data.length;s++){l[a.data[s].tradingsymbol]&&(a.data[s].tradingsymbol=l[a.data[s].tradingsymbol]);var c=a.data[s];i.ticks[c.tradingsymbol]&&(c.last_price=i.ticks[c.tradingsymbol].lastTradedPrice)}if(t&&t.data)for(var d=0;d<t.data.net.length;d++){var u=t.data.net[d];i.ticks[u.tradingsymbol]&&(u.last_price=i.ticks[u.tradingsymbol].lastTradedPrice,u.pnl=u.sell_value+(u.buy_quantity-u.sell_quantity)*u.last_price-u.buy_value)}var m=0,p=0,h=0,y=0,f=0,E=0,b=0,S=0,v=0;if(a&&a.data&&t&&t.data){for(var w=0;w<a.data.length;w++){var O=a.data[w];m+=O.quantity+O.t1_quantity}if(t.data.net)for(var C=0;C<t.data.net.length;C++){var T=t.data.net[C];"CNC"==T.product?(T.quantity>0?p+=T.quantity:h+=T.quantity,f+=T.pnl,v+=T.value):"MIS"==T.product&&(y+=T.pnl,S+=T.value),E+=T.pnl,b+=T.value}}a.data.sort((function(e,t){return e.day_change_percentage-t.day_change_percentage})),t.data.net.sort((function(e,t){return"MIS"==e.product&&"MIS"==t.product?0!=e.quantity&&0!=t.quantity?e.pnl-t.pnl:t.quantity-e.quantity:"MIS"==e.product&&"CNC"==t.product?-1:"CNC"==e.product&&"MIS"==t.product?1:0!=e.quantity&&0!=t.quantity?t.quantity-e.quantity:0==e.quantity?1:0==t.quantity?-1:0}));for(var R,N=0,I=0,q=0;q<a.data.length;q++){var M=a.data[q];N+=(M.quantity+M.t1_quantity)*M.last_price,I+=(M.quantity+M.t1_quantity)*M.average_price}var D=(R=Math.round(N-I))<0?"red":"green";return document.title=Math.round(R/1e3)+"K ( "+(100*R/I).toFixed(2)+"%) ",r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Change"))),r.a.createElement("tbody",null,r.a.createElement("tr",{key:"summary"},r.a.createElement("td",{colSpan:"2",className:"summaryRow"},r.a.createElement("span",{className:"totalValue"},(N/1e5).toFixed(2)),"L\xa0\xa0\xa0",r.a.createElement("span",{className:D},"".concat(Math.round(R),"(").concat((100*R/I).toFixed(2),"%)")),o&&r.a.createElement("span",null,"\xa0",(o.data.equity.net/1e3).toFixed(1),"K"))),r.a.createElement("tr",{key:"position"},r.a.createElement("td",{colSpan:"2",className:"positionRow"},r.a.createElement("span",null,m,"\xa0|",p,"\xa0|",h,"\xa0\xa0=\xa0",m+p))),r.a.createElement("tr",{key:"daypositionsummary"},r.a.createElement("td",{colSpan:"2",className:"summaryRow"},r.a.createElement("span",{className:E<0?"red":"green"},(E/1e3).toFixed(2),"K"),"\xa0\xa0\xa0",r.a.createElement("span",{className:"bracketValue"},"\xa0",r.a.createElement("span",{className:f<0?"red":"green"},"".concat(f.toFixed(2))),"C"),"\xa0\xa0",r.a.createElement("span",{className:"bracketValue"},"\xa0",r.a.createElement("span",{className:y<0?"red":"green"},"".concat(Math.round(y))),"M"))),r.a.createElement("tr",{key:"dayposition"},r.a.createElement("td",{colSpan:"2",className:"positionRow"},r.a.createElement("span",null,v.toFixed(0),"\xa0|\xa0",S.toFixed(0),"\xa0\xa0\xa0=\xa0",b.toFixed(0)))),t.data.net.map((function(e,t){return r.a.createElement(g,{onTableRowclick:n,key:"POS-"+t+e.tradingsymbol,data:e})})),r.a.createElement("tr",null),r.a.createElement("tr",{key:"summary-row-2"},r.a.createElement("td",{colSpan:"2",className:"summaryRow"},r.a.createElement("span",{className:"totalValue"},(N/1e5).toFixed(2)),"L\xa0\xa0\xa0",r.a.createElement("span",{className:D},"".concat(Math.round(R),"(").concat((100*R/I).toFixed(2),"%)")))),a.data.map((function(e,t){return r.a.createElement(k,{onTableRowclick:n,key:"HOLD-"+t+e.tradingsymbol,data:e})}))))}}]),a}(r.a.Component),g=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).openStockInfo=function(){n.props.onTableRowclick(n.props.data.tradingsymbol)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.pnl<0?"red":"green";return r.a.createElement("tr",{rowId:"POS-"+e.tradingsymbol,onClick:this.openStockInfo,className:0==e.quantity?"lavender":""},r.a.createElement("td",{style:{position:"relative"}},e.tradingsymbol,"\xa0",r.a.createElement("span",{className:"holdQty "+(e.quantity<0?"red":"green")},"(",e.quantity,")"),r.a.createElement("span",{className:"productType"},e.product)),r.a.createElement("td",null,r.a.createElement("span",{className:"last_price"},e.last_price.toFixed(2)),"\xa0\xa0",r.a.createElement("span",{style:{fontWeight:"bold"},className:"holdDayChg "+t},e.pnl.toFixed(2)),r.a.createElement("br",null),r.a.createElement("span",{className:"positionValue"},Math.round(e.value/1e3),"k")))}}]),a}(r.a.Component),k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).openStockInfo=function(){n.props.onTableRowclick(n.props.data.tradingsymbol)},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.data,t=(e.quantity+e.t1_quantity)*e.last_price-(e.quantity+e.t1_quantity)*e.average_price,a=e.day_change_percentage<0?"red":"green",n=t<0?"red":"green";return r.a.createElement("tr",{rowId:"HOLD-"+e.tradingsymbol,onClick:this.openStockInfo},r.a.createElement("td",null,e.tradingsymbol,r.a.createElement("span",{className:"holdQty"},"(",e.quantity+e.t1_quantity,")"),"\xa0\xa0",r.a.createElement("span",{className:"holdValue"},"(",Math.round((e.quantity+e.t1_quantity)*e.last_price/1e3),")")),r.a.createElement("td",null,r.a.createElement("span",{className:"last_price"},e.last_price.toFixed(2)),"\xa0\xa0",r.a.createElement("span",{className:"holdDayChg "+a},e.day_change_percentage.toFixed(2)),r.a.createElement("br",null),r.a.createElement("span",{className:"holdPL "+n},Math.round(t)),"\xa0\xa0",r.a.createElement("span",{className:"holdPLPec "+n},(100*t/((e.quantity+e.t1_quantity)*e.average_price)).toFixed(2),"%")))}}]),a}(r.a.Component),E=a(31),b=(a(40),!0),S=function(e,t,a){e.transaction_type="BUY",L(e),A(e,t,a)},v=function(e,t,a){e.transaction_type="SELL",L(e),A(e,t,a)},w=function(e,t,a){e.transaction_type="BUY",P(e),A(e,t,a)},O=function(e,t,a){e.transaction_type="SELL",P(e),A(e,t,a)},C=function(e,t,a){e.transaction_type="BUY",_(e),A(e,t,a)},T=function(e,t,a){e.transaction_type="SELL",_(e),A(e,t,a)},R=function(e,t,a){e.transaction_type="BUY",F(e),A(e,t,a)},N=function(e,t,a){e.transaction_type="SELL",F(e),A(e,t,a)},I=function(e,t,a){e.transaction_type="BUY",x(e),A(e,t,a)},q=function(e,t,a){e.transaction_type="SELL",x(e),A(e,t,a)},M=function(e,t,a){e.transaction_type="BUY",B(e),A(e,t,a)},D=function(e,t,a){e.transaction_type="SELL",B(e),A(e,t,a)},L=function(e){e.order_type="LIMIT",e.product="CNC",e.validity="DAY",e.disclosed_quantity=0,e.trigger_price=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},P=function(e){e.order_type="MARKET",e.product="CNC",e.validity="DAY",e.disclosed_quantity=0,e.trigger_price=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},_=function(e){e.order_type="SL-M",e.product="CNC",e.validity="DAY",e.disclosed_quantity=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},F=function(e){e.order_type="LIMIT",e.product="MIS",e.validity="DAY",e.disclosed_quantity=0,e.trigger_price=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},x=function(e){e.order_type="MARKET",e.product="MIS",e.validity="DAY",e.disclosed_quantity=0,e.trigger_price=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},B=function(e){e.order_type="SL-M",e.product="MIS",e.validity="DAY",e.disclosed_quantity=0,e.squareoff=0,e.stoploss=0,e.trailing_stoploss=0,e.variety="regular",e.user_id="DA6170"},V=function(e){b&&E.a.notify(e,{position:"top-right",duration:3e3})},A=function(e,t,a){var n=[];for(var o in e)n.push(o+"="+e[o]);var i=n.join("&");fetch("https://kite.zerodha.com/oms/orders/regular",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey},body:i}).then((function(e){return e.json()})).then((function(n){"success"==n.status?(t(n),V(r.a.createElement("span",{className:"green"},e.tradingsymbol," \xa0\xa0O_ID->",n.data.order_id))):"error"==n.status&&(a(n),V(r.a.createElement("span",{className:"red"},e.tradingsymbol," \xa0\xa0 ->",n.message)))})).catch((function(e){console.error(e),a(e)})),V(r.a.createElement("span",{className:"BUY"==e.transaction_type?"green":"red"},e.tradingsymbol," \xa0\xa0",e.product," \xa0Q->",e.quantity))},j=function(e,t){fetch("https://kite.zerodha.com/oms/portfolio/positions",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey}}).then((function(e){return e.json()})).then((function(a){"success"==a.status?e(a):"error"==a.status&&t(a)})).catch((function(e){console.error(e),t(e)}))},K=function(e,t,a){fetch("https://api.kite.trade/quote?"+e,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey}}).then((function(e){return e.json()})).then((function(e){"success"==e.status?t(e):"error"==e.status&&a(e)})).catch((function(e){console.error(e),a(e)}))},Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).fillInputWithLatestPrice=function(){var e=n.props,t=e.kitedata,a=e.symbol,r=t.ticks[a].depth;r&&(n.setState({orderStatus:t.ticks[a].exchange+"::"+a,orderStatusStyle:{},buyQuantity:"",buyPrice:r.buy[0].price,sellQuantity:"",sellPrice:r.sell[0].price}),n.setFocusonOrderWindow())},n.setFocusonOrderWindow=function(){n.textInputBuyQty?n.textInputBuyQty.select():n.textInputSellQty&&n.textInputSellQty.select()},n.updaetOrderStatus=function(e){n.setState({orderStatus:e})},n.onInputValueChange=function(e){var t=n.state,a=t.buyQuantity,r=t.buyPrice,o=t.sellQuantity,i=t.sellPrice,l=(t.orderStatus,t.orderStatusStyle,n.props),s=l.kitedata,c=l.symbol;"buyQuantity"==e.target.name?(a=e.target.value,n.setState({buyQuantity:a,orderStatusStyle:{color:"green"},orderStatus:s.ticks[c].exchange+"::"+c+" ( Q-> "+a+" )  ( P-> "+r+" )"})):"buyPrice"==e.target.name?(r=e.target.value,n.setState({buyPrice:r,orderStatusStyle:{color:"green"},orderStatus:s.ticks[c].exchange+"::"+c+" ( Q-> "+a+" )  ( P-> "+r+" )"})):"sellQuantity"==e.target.name?(o=e.target.value,n.setState({sellQuantity:o,orderStatusStyle:{color:"red"},orderStatus:s.ticks[c].exchange+"::"+c+" ( Q-> "+o+" )  ( P-> "+i+" )"})):"sellPrice"==e.target.name&&(i=e.target.value,n.setState({sellPrice:i,orderStatusStyle:{color:"red"},orderStatus:s.ticks[c].exchange+"::"+c+" ( Q-> "+o+" )  ( P-> "+i+" )"}))},n.toogleBuyView=function(){var e=n.state.orderWindowView;e.buyView=!e.buyView,n.setState({orderWindowView:e}),localStorage.setItem("orderWindowView.json",JSON.stringify(e))},n.toogleSellView=function(){var e=n.state.orderWindowView;e.sellView=!e.sellView,n.setState({orderWindowView:e}),localStorage.setItem("orderWindowView.json",JSON.stringify(e))},n.onOnderTypeChange=function(e){if("orderType"==e.target.name){var t=e.target.value,a=n.state.orderWindowView;a.orderType=t,n.setState({orderWindowView:a}),localStorage.setItem("orderWindowView.json",JSON.stringify(a))}},n.onProductTypeChange=function(e){if("productType"==e.target.name){var t=e.target.value,a=n.state.orderWindowView;a.productType=t,n.setState({orderWindowView:a}),localStorage.setItem("orderWindowView.json",JSON.stringify(a))}},n.onOrderSuccess=function(e){n.setState({orderStatus:e.data.order_id}),n.props.updateMarginData()},n.onOrderError=function(e){n.setState({orderStatus:e.message}),n.props.updateMarginData()},n.sendBuyOrderRequest=function(){var e=n.state,t=e.buyQuantity,a=e.buyPrice,r=e.orderWindowView,o=n.props,i=o.kitedata,l=o.symbol,s=r.productType,c=r.orderType;isNaN(t)||isNaN(a)||isNaN(Number.parseInt(t))?window.alert("Invalid input"):("CNC"==s?"MARKET"==c?w({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError):"LIMIT"==c?S({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError):"SL_MARKET"==c&&C({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"BUY",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError):"MIS"==s&&("MARKET"==c?I({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError):"LIMIT"==c?R({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError):"SL_MARKET"==c&&M({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"BUY",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError)),n.setState({buyQuantity:"",sellQuantity:""}))},n.sendSellOrderRequest=function(){var e=n.state,t=e.sellQuantity,a=e.sellPrice,r=e.orderWindowView,o=n.props,i=o.kitedata,l=o.symbol,s=r.productType,c=r.orderType;isNaN(t)||isNaN(a)||isNaN(Number.parseInt(t))?window.alert("Invalid input"):("CNC"==s?"MARKET"==c?O({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError):"LIMIT"==c?v({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError):"SL_MARKET"==c&&T({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"SELL",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError):"MIS"==s&&("MARKET"==c?q({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError):"LIMIT"==c?N({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError):"SL_MARKET"==c&&D({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"SELL",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError)),n.setState({buyQuantity:"",sellQuantity:""}))};var r={buyView:!0,sellView:!0,orderType:"LIMIT",productType:"CNC"};return r=void 0!=localStorage.getItem("orderWindowView.json")?JSON.parse(localStorage.getItem("orderWindowView.json")):r,n.state={orderWindowView:r},n.textInputBuyQty=null,n.textInputSellQty=null,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fillInputWithLatestPrice()}},{key:"componentDidUpdate",value:function(e){e.symbol!=this.props.symbol&&this.fillInputWithLatestPrice()}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=t.symbol,o=this.state,i=o.buyQuantity,l=o.buyPrice,s=o.sellQuantity,c=o.sellPrice,d=o.orderStatus,u=o.orderStatusStyle,m=o.orderWindowView,p=a.ticks[n].depth;return r.a.createElement("div",{className:"orderView"},r.a.createElement("button",{className:"favButton orderToggleBtn",onClick:this.toogleSellView,type:"button"},"SW"),r.a.createElement("button",{className:"favButton orderToggleBtn",onClick:this.toogleBuyView,type:"button"},"BW"),r.a.createElement("div",{className:"line"}),(m.buyView||m.sellView)&&p&&r.a.createElement("div",{className:"orderSelection"},r.a.createElement("div",{className:"productTypeSelec orderType"},r.a.createElement("input",{type:"radio",name:"productType",onClick:this.onProductTypeChange,id:"PRODUCT_TYPE_CNC",checked:"CNC"==m.productType,value:"CNC"}),r.a.createElement("label",{style:{fontWeight:"CNC"==m.productType?"bold":"normal"},for:"PRODUCT_TYPE_CNC"},"CNC"),r.a.createElement("input",{type:"radio",name:"productType",onClick:this.onProductTypeChange,id:"PRODUCT_TYPE_MIS",checked:"MIS"==m.productType,value:"MIS"}),r.a.createElement("label",{style:{fontWeight:"MIS"==m.productType?"bold":"normal"},for:"PRODUCT_TYPE_MIS"},"MIS")),r.a.createElement("div",{className:"orderType"},r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_MARKET",checked:"MARKET"==m.orderType,value:"MARKET"}),r.a.createElement("label",{style:{fontWeight:"MARKET"==m.orderType?"bold":"normal"},for:"ORDER_TYPE_MARKET"},"M"),r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_LIMIT",checked:"LIMIT"==m.orderType,value:"LIMIT"}),r.a.createElement("label",{style:{fontWeight:"LIMIT"==m.orderType?"bold":"normal"},for:"ORDER_TYPE_LIMIT"},"L"),r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_SL_MARKET",checked:"SL_MARKET"==m.orderType,value:"SL_MARKET"}),r.a.createElement("label",{style:{fontWeight:"SL_MARKET"==m.orderType?"bold":"normal"},for:"ORDER_TYPE_SL_MARKET"},"SL_M")),r.a.createElement("div",{className:"line"})),r.a.createElement("div",{style:u,className:"orderStatusView"},d),r.a.createElement("br",null),m.buyView&&p&&r.a.createElement("div",{className:"buyOrderView",onKeyUp:function(t){13===t.keyCode&&e.sendBuyOrderRequest()}},r.a.createElement("label",{for:"buyQuantity"},"Q:"),r.a.createElement("input",{type:"number",ref:function(t){return e.textInputBuyQty=t},onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"buyQuantity",step:1,name:"buyQuantity",min:"1",max:"1000",value:i}),r.a.createElement("label",{for:"buyPrice"},"P:"),r.a.createElement("input",{type:"number",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"buyPrice",step:.2,name:"buyPrice",min:"1",max:"10000",value:l}),r.a.createElement("button",{className:"buyButton",onClick:this.sendBuyOrderRequest}," BUY ")),m.sellView&&p&&r.a.createElement("div",{className:"sellOrderView",onKeyUp:function(t){13===t.keyCode&&e.sendSellOrderRequest()}},r.a.createElement("label",{for:"sellQuantity"},"Q:"),r.a.createElement("input",{type:"number",ref:function(t){return e.textInputSellQty=t},onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"sellQuantity",step:1,name:"sellQuantity",min:"1",max:"1000",value:s}),r.a.createElement("label",{for:"sellPrice"},"P:"),r.a.createElement("input",{type:"number",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"sellPrice",step:.2,name:"sellPrice",min:"1",max:"10000",value:c}),r.a.createElement("button",{className:"sellButton",onClick:this.sendSellOrderRequest}," SELL ")))}}]),a}(r.a.Component),U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onColorInput=function(e){var t=n.props,a=t.stockInfo;(0,t.updateKitePerfData)(a.symbol,"color",e.target.value)},n.fetchHistoricalData=function(){var e=n.props.kitedata.ticks[n.props.stockInfo.symbol],t=new Date;t.setDate(t.getDate()-2e3),fetch("https://api.kite.trade/instruments/historical/"+e.token+"/day?from="+t.toISOString().split("T")[0]+"&to="+(new Date).toISOString().split("T")[0],{method:"GET",headers:{"X-Kite-Version":"3","Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey}}).then((function(e){return e.json()})).then(function(e){this.setState({hCandles:e.data.candles})}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.state={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchHistoricalData()}},{key:"componentDidUpdate",value:function(e){e.stockInfo.symbol!==this.props.stockInfo.symbol&&(this.fetchHistoricalData(),this.setState({isShowGraph:!1}))}},{key:"render",value:function(){var e,t,a,n,o,i,l,s,c,d,u,m,p=this,h=this.state,y=h.hCandles,f=h.isShowGraph,g=this.props,k=g.kitedata,E=(g.updateKitePerfData,g.stockInfo),b=g.hideStokInfo,S=g.addToFavList,v=g.removeFromFavList,w=g.showFundamentalsDialog,O=g.updateMarginData,C=g.quoteData,T=(g.isOpenGraph,g.positionsdata),R=g.holdingsdata,N=E.symbol,I=E.tableId,q=void 0;if(R&&R.data&&T&&T.data){var M=T.data.net.find((function(e){return e.tradingsymbol==N&&"CNC"==e.product})),D=T.data.net.find((function(e){return e.tradingsymbol==N&&"MIS"==e.product})),L=R.data.find((function(e){return e.tradingsymbol==N}));if((M||D||L)&&(q={},M&&(q.cnc={qty:M.quantity,pnl:M.pnl.toFixed(0),value:Math.round(M.value/1e3)}),D&&(q.mis={qty:D.quantity,pnl:D.pnl.toFixed(0),value:Math.round(D.value/1e3)}),L)){var P=L.quantity+L.t1_quantity,_=(L.quantity+L.t1_quantity)*L.last_price-(L.quantity+L.t1_quantity)*L.average_price;q.hold={qty:P,pnl:_.toFixed(0),value:Math.round(P*L.last_price/1e3)}}}if(y){var F=y,x=F.length-1,B=F[x][4];e=Number.parseInt(100*-(F[x-1][4]-B)/F[x-1][4]),t=Number.parseInt(100*-(F[x-2][4]-B)/F[x-2][4]),a=Number.parseInt(100*-(F[x-3][4]-B)/F[x-3][4]),n=Number.parseInt(100*-(F[x-5][4]-B)/F[x-5][4]),o=Number.parseInt(100*-(F[x-10][4]-B)/F[x-10][4]),x-23>0&&(i=Number.parseInt(100*-(F[x-23][4]-B)/F[x-23][4])),x-140>0&&(l=Number.parseInt(100*-(F[x-140][4]-B)/F[x-140][4])),x-269>0&&(s=Number.parseInt(100*-(F[x-269][4]-B)/F[x-269][4])),x-540>0&&(c=Number.parseInt(100*-(F[x-540][4]-B)/F[x-540][4])),x-807>0&&(d=Number.parseInt(100*-(F[x-807][4]-B)/F[x-807][4])),x-1076>0&&(u=Number.parseInt(100*-(F[x-1076][4]-B)/F[x-1076][4])),x-1150>0&&(m=Number.parseInt(100*-(F[0][4]-B)/F[0][4]))}var V,A,j="https://kite.zerodha.com/chart/ext/tvc/"+k.ticks[N].exchange+"/"+k.ticks[N].tradingsymbol+"/"+k.ticks[N].token,K=k.ticks[N].depth;if(C){var U=C[k.ticks[N].exchange+":"+N];U&&(V=U.lower_circuit_limit,A=U.upper_circuit_limit)}return r.a.createElement("div",{className:"stockInfo"},f&&r.a.createElement("iframe",{className:"stockInfoFraph",src:j}),r.a.createElement("p",{onDoubleClick:b,className:"name"},k.ticks[N].name),r.a.createElement("div",{className:"infoNPosition"},r.a.createElement("table",{className:"stockInfoTable"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2",style:{cursor:"pointer",textDecoration:"underline"},onClick:function(e){return w(N)}},r.a.createElement("a",{rel:"noreferrer"}," "),k.ticks[N].tradingsymbol)),r.a.createElement("tr",null,r.a.createElement("td",null,"LTP"),r.a.createElement("td",null,k.ticks[N].lastTradedPrice)),r.a.createElement("tr",null,r.a.createElement("td",null,"Chg%"),r.a.createElement("td",{className:k.ticks[N].change<0?"red":"green"},k.ticks[N].change.toFixed(2),"%")),r.a.createElement("tr",null,r.a.createElement("td",null,"Up%"),r.a.createElement("td",null,(100*(k.ticks[N].lastTradedPrice-k.ticks[N].lowPrice)/k.ticks[N].lowPrice).toFixed(2),"%")),r.a.createElement("tr",null,r.a.createElement("td",null,"Down%"),r.a.createElement("td",null,(100*(k.ticks[N].highPrice-k.ticks[N].lastTradedPrice)/k.ticks[N].highPrice).toFixed(2),"%")),r.a.createElement("tr",null,r.a.createElement("td",null,"OP"),r.a.createElement("td",null,k.ticks[N].openPrice)),r.a.createElement("tr",null,r.a.createElement("td",null,"CL"),r.a.createElement("td",null,k.ticks[N].closePrice)),V&&r.a.createElement("tr",null,r.a.createElement("td",null,"LC"),r.a.createElement("td",null,V)),A&&r.a.createElement("tr",null,r.a.createElement("td",null,"UC"),r.a.createElement("td",null,A)),r.a.createElement("tr",{className:"grpah-prefButton"},r.a.createElement("td",{colSpan:"2"},r.a.createElement("input",{onInput:this.onColorInput,type:"color",className:"favcolor",name:"favcolor",value:"#ff0000"}),r.a.createElement("button",{className:"favButton",onClick:function(e){p.setState({isShowGraph:!f})},type:"button"},"G"))))),q&&r.a.createElement("table",{className:"positionInfo"},r.a.createElement("tbody",null,q.mis&&r.a.createElement("tr",null,r.a.createElement("td",null,"M"),r.a.createElement("td",null,q.mis.qty),r.a.createElement("td",null,q.mis.value,"k"),r.a.createElement("td",{style:{color:q.mis.pnl>0?"green":"red"}},q.mis.pnl)),q.cnc&&r.a.createElement("tr",null,r.a.createElement("td",null,"C"),r.a.createElement("td",null,q.cnc.qty),r.a.createElement("td",null,q.cnc.value,"k"),"  ",r.a.createElement("td",{style:{color:q.cnc.pnl>0?"green":"red"}},q.cnc.pnl)),q.hold&&r.a.createElement("tr",null,r.a.createElement("td",null,"H"),r.a.createElement("td",null,q.hold.qty),r.a.createElement("td",null,q.hold.value,"k"),r.a.createElement("td",{style:{color:q.hold.pnl>0?"green":"red"}},q.hold.pnl))))),y&&r.a.createElement("table",{className:"stockInfoTable historyTable"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"1D"),r.a.createElement("td",null,e)),r.a.createElement("tr",null,r.a.createElement("td",null,"2D"),r.a.createElement("td",null,t)),r.a.createElement("tr",null,r.a.createElement("td",null,"3D"),r.a.createElement("td",null,a)),r.a.createElement("tr",null,r.a.createElement("td",null,"1W"),r.a.createElement("td",null,n)),r.a.createElement("tr",null,r.a.createElement("td",null,"2W"),r.a.createElement("td",null,o)),r.a.createElement("tr",null,r.a.createElement("td",null,"1M"),r.a.createElement("td",null,i)),r.a.createElement("tr",null,r.a.createElement("td",null,"6M"),r.a.createElement("td",null,l)),r.a.createElement("tr",null,r.a.createElement("td",null,"1Y"),r.a.createElement("td",null,s)),r.a.createElement("tr",null,r.a.createElement("td",null,"2Y"),r.a.createElement("td",null,c)),r.a.createElement("tr",null,r.a.createElement("td",null,"3Y"),r.a.createElement("td",null,d)),r.a.createElement("tr",null,r.a.createElement("td",null,"4Y"),r.a.createElement("td",null,u)),r.a.createElement("tr",null,r.a.createElement("td",null,"5Y"),r.a.createElement("td",null,m)))),r.a.createElement("br",null),r.a.createElement("button",{className:"favButton green",onClick:function(e){S(N,"0")},type:"button"},"A 0"),r.a.createElement("button",{className:"favButton green",onClick:function(e){S(N,"MIS")},type:"button"},"MIS"),void 0!=I&&r.a.createElement("button",{className:"favButton red",onClick:function(e){v(N,I)},type:"button"},"R ",I),r.a.createElement(Q,{updateMarginData:O,kitedata:k,symbol:N}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{fontWeight:"bold"}},"H: ",r.a.createElement("span",{className:"HLVdiv"},k.ticks[N].highPrice),"\xa0\xa0L: ",r.a.createElement("span",{className:"HLVdiv"},k.ticks[N].lowPrice),"\xa0\xa0\xa0V: ",r.a.createElement("span",{className:"HLVdiv"},k.ticks[N].volumeTradedToday)),K&&5==K.buy.length&&5==K.sell.length&&r.a.createElement("table",{className:"bidTable"},r.a.createElement("tbody",null,r.a.createElement("tr",null),r.a.createElement("tr",null,r.a.createElement("td",{className:"blue"},K.buy[0].price),r.a.createElement("td",{className:"blue"},K.buy[0].quantity),r.a.createElement("td",{className:"red"},K.sell[0].price),r.a.createElement("td",{className:"red"},K.sell[0].quantity)),r.a.createElement("tr",null,r.a.createElement("td",{className:"blue"},K.buy[1].price),r.a.createElement("td",{className:"blue"},K.buy[1].quantity),r.a.createElement("td",{className:"red"},K.sell[1].price),r.a.createElement("td",{className:"red"},K.sell[1].quantity)),r.a.createElement("tr",null,r.a.createElement("td",{className:"blue"},K.buy[2].price),r.a.createElement("td",{className:"blue"},K.buy[2].quantity),r.a.createElement("td",{className:"red"},K.sell[2].price),r.a.createElement("td",{className:"red"},K.sell[2].quantity)),r.a.createElement("tr",null,r.a.createElement("td",{className:"blue"},K.buy[3].price),r.a.createElement("td",{className:"blue"},K.buy[3].quantity),r.a.createElement("td",{className:"red"},K.sell[3].price),r.a.createElement("td",{className:"red"},K.sell[3].quantity)),r.a.createElement("tr",null,r.a.createElement("td",{className:"blue"},K.buy[4].price),r.a.createElement("td",{className:"blue"},K.buy[4].quantity),r.a.createElement("td",{className:"red"},K.sell[4].price),r.a.createElement("td",{className:"red"},K.sell[4].quantity)),r.a.createElement("tr",null),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2",className:"blue"},k.ticks[N].totalBuyQuantity),r.a.createElement("td",null),r.a.createElement("td",{colSpan:"2",className:"red"},k.ticks[N].totalSellQuantity),r.a.createElement("td",null)))))}}]),a}(r.a.Component),H=a(8),Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).toogleBuyView=function(){var e=n.state.orderWindowView;e.buyView=!e.buyView,n.setState({orderWindowView:e}),localStorage.setItem("basketOrderWindowView",JSON.stringify(e))},n.toogleSellView=function(){var e=n.state.orderWindowView;e.sellView=!e.sellView,n.setState({orderWindowView:e}),localStorage.setItem("basketOrderWindowView",JSON.stringify(e))},n.onPositionSuccess=function(e){n.setState({positionsdata:e})},n.onPositionError=function(e){n.updateOrderStatus("Error in fetching position")},n.fetchPositionData=function(e){j(n.onPositionSuccess,n.onPositionError)},n.updateOrderStatus=function(e){n.setState({orderStatus:e})},n.showDialog=function(e){n.setState({isHideDialog:!1})},n.updateFillOrderRequest=function(){var e=n.state,t=e.totalOrderRequest,a=e.totalFillOrderRequest;void 0!=t&&(a++,n.setState({totalFillOrderRequest:a}),a==t&&n.setState({totalOrderRequest:void 0,totalFillOrderRequest:void 0}))},n.checkFoPendingRequest=function(){for(var e=n.state,t=e.totalOrderRequest,a=e.totalFillOrderRequest,r=0,o=0,i=Object.keys(n.rowfRefs);o<i.length;o++){var l=i[o];r+=n.rowfRefs[l].getPendingOrderRequest()}return(void 0!=t||0!=r)&&(window.alert("Request pending -> All "+r+" Bulk : "+(t-a)),!0)},n.totalSelectedRows=function(){for(var e=0,t=0,a=Object.keys(n.rowfRefs);t<a.length;t++){var r=a[t];n.rowfRefs[r].isCheckBoxChecked()&&e++}return e},n.placeBuyOrderForselectedRow=function(){if(!n.checkFoPendingRequest()){var e=n.state,t=e.totalOrderRequest;e.totalFillOrderRequest;if(t=n.totalSelectedRows(),window.confirm("BUY order for all selected rows confirm : "+t)&&t>0){n.setState({totalOrderRequest:t,totalFillOrderRequest:0});for(var a=0,r=Object.keys(n.rowfRefs);a<r.length;a++){var o=r[a],i=n.rowfRefs[o];i.isCheckBoxChecked()&&i.sendBuyOrderRequest()}}}},n.placeSellOrderForselectedRow=function(e){if(!n.checkFoPendingRequest()){var t=n.state,a=t.totalOrderRequest;t.totalFillOrderRequest;if(a=n.totalSelectedRows(),window.confirm("SELL order for all selected rows confirm : "+a)&&a>0){n.setState({totalOrderRequest:a,totalFillOrderRequest:0});for(var r=0,o=Object.keys(n.rowfRefs);r<o.length;r++){var i=o[r],l=n.rowfRefs[i];l.isCheckBoxChecked()&&l.sendSellOrderRequest()}}}},n.onSQOFFClick=function(){if(!n.checkFoPendingRequest()){var e=n.totalSelectedRows(),t=!1;0!=e&&(t=window.confirm("SQ only selected rows:"+e));var a=window.prompt("selected position "+(t?e:" ALL ")+" Percetage to SQ OFF ->"),r=0;if(null!=a&&""!=a&&!isNaN(a))for(var o=0,i=Object.keys(n.rowfRefs);o<i.length;o++){var l=i[o],s=n.rowfRefs[l];t&&!s.isCheckBoxChecked()||(r+=s.fillQtyValueOnSqOffClick(a))}n.updateOrderStatus("Order Value -> "+(r/1e3).toFixed(1)+"K")}},n.onTpriceClick=function(){if(!n.checkFoPendingRequest()){var e=n.totalSelectedRows(),t=window.prompt("Position selected "+e+" Stop Loss %"),a=0;if(null!=t&&""!=t&&!isNaN(t))for(var r=0,o=Object.keys(n.rowfRefs);r<o.length;r++){var i=o[r],l=n.rowfRefs[i];l.isCheckBoxChecked()&&(a+=l.fillPriceValueOnTpriceClick(t))}n.updateOrderStatus("Order Value -> "+(a/1e3).toFixed(1)+"K")}},n.fillQtyForValue=function(){if(!n.checkFoPendingRequest()){var e=n.totalSelectedRows(),t=window.prompt("Build Position "+e+" for amount ->"),a=0;if(null!=t&&""!=t&&!isNaN(t)){for(var r=0,o=Object.keys(n.rowfRefs);r<o.length;r++){var i=o[r],l=n.rowfRefs[i];l.isCheckBoxChecked()&&(a+=l.fillQtyForValue(t))}n.updateOrderStatus("Order Value -> "+(a/1e3).toFixed(1)+"K")}}},n.uncheckPositionWithCNCnMIS=function(){for(var e=0,t=0,a=Object.keys(n.rowfRefs);t<a.length;t++){var r=a[t];n.rowfRefs[r].uncheckPositionWithCNCnMIS()&&e++}n.updateOrderStatus("Uncheckd Rows :"+e)},n.onSymbolSelect=function(e){var t=document.querySelectorAll('#basketOrderDialog tr[rowid="MIS_ORDER-'+e.target.value+'"]');t&&t.length>0&&(t[0].scrollIntoView(),t[0].classList.remove("blinkRow"),setTimeout((function(e){document.querySelectorAll('#basketOrderDialog tr[rowid="MIS_ORDER-'+e+'"]')[0].classList.add("blinkRow")}),50,e.target.value))},n.onOnderTypeChange=function(e){"orderType"==e.target.name&&n.setState({orderType:e.target.value})},n.setSortOrder=function(e){var t=n.state[e];n.setState({isSortPosition:!1,isSortOnValue:!1,isSortOnPriceChange:!1,isSortOnMISQty:!1,isSortOnDayQty:!1});var a={};a[e]=!t,n.setState(a)},n.selectRows=function(e){for(var t=void 0,a=void 0,r=0;r<e.length;r++){if(n.rowfRefs["MIS-"+e[r]].isCheckBoxChecked()){if(void 0!=t){a=e[r];break}t=e[r]}}var o=e.indexOf(t),i=e.indexOf(a);if(void 0!=t&&void 0!=a){for(var l=0,s=o;s<=i;s++){n.rowfRefs["MIS-"+e[s]].markCheckBox(!0),l++}n.updateOrderStatus(t+"   ---\x3e  "+a+"  --\x3e "+l)}else window.alert("Select start & end both")},n.uncheckAllRow=function(){for(var e=0,t=Object.keys(n.rowfRefs);e<t.length;e++){var a=t[e];n.rowfRefs[a].markCheckBox(!1)}};var r={buyView:!0,sellView:!0};return r=void 0!=localStorage.getItem("basketOrderWindowView")?JSON.parse(localStorage.getItem("basketOrderWindowView")):r,n.rowfRefs={},n.state={orderWindowView:r,isHideDialog:!1,orderType:"MARKET",totaOrderRequest:void 0,totalFillOrderRequest:void 0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchPositionData(),this.updateOrderStatus("MARGIN ORDRES"),this.interval=setInterval(this.fetchPositionData,2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.kiteBasketOrderData,a=this.props,n=a.kitedata,o=a.hideBasketOrderDialog,i=a.tableId,l=a.addToFavList,s=a.removeFromFavList,c=a.onTableRowclick,d=a.updateMarginData,u=this.state,m=u.orderStatus,p=u.orderWindowView,h=u.isHideDialog,y=u.positionsdata,f=u.orderType,g=u.isSortPosition,k=u.isSortOnValue,E=u.isSortOnPriceChange,b=u.isSortOnDayQty,S=u.isSortOnMISQty,v=u.totalOrderRequest,w=u.totalFillOrderRequest,O={},C=0,T=0;if(y){for(var R=0;R<y.data.net.length;R++)"MIS"==y.data.net[R].product&&void 0!=n.ticks[y.data.net[R].tradingsymbol]&&(O[y.data.net[R].tradingsymbol]=y.data.net[R]);for(var N=0;N<y.data.net.length;N++)"CNC"==y.data.net[N].product&&void 0!=O[y.data.net[N].tradingsymbol]&&(O[y.data.net[N].tradingsymbol].dayCNC=y.data.net[N]);if(g){var I=Object(H.a)(t);I.sort((function(e,t){return(O[e]&&0!=O[e].quantity?O[e].pnl:999999)-(O[t]&&0!=O[t].quantity?O[t].pnl:999999)})),t=I}else if(k){var q=Object(H.a)(t);q.sort((function(e,t){var a=O[e]&&0!=O[e].quantity?O[e].value:-99999999;return(O[t]&&0!=O[t].quantity?O[t].value:-99999999)-a})),t=q}else if(E)if(void 0==this.previosChangeSortedOrder){var M=Object(H.a)(t);M.sort((function(e,t){return n.ticks[e].change-n.ticks[t].change})),t=M,this.previosChangeSortedOrder=M}else t=this.previosChangeSortedOrder;else if(b){var D=Object(H.a)(t);D.sort((function(e,t){var a=O[e]&&O[e].dayCNC?O[e].dayCNC.quantity:0,n=O[t]&&O[t].dayCNC?O[t].dayCNC.quantity:0;return 0==a&&(a=-9999999),0==n&&(n=-9999999),n-a})),t=D}else if(S){var L=Object(H.a)(t);L.sort((function(e,t){var a=O[e]?O[e].quantity:0,n=O[t]?O[t].quantity:0;return 0==a&&(a=-9999999),0==n&&(n=-9999999),n-a})),t=L}for(var P=0;P<y.data.net.length;P++)"MIS"==y.data.net[P].product&&(T++,0!=y.data.net[P].quantity&&C++)}var _="BUY",F="SELL";return void 0!=v&&(_="B(".concat(v,"/").concat(w,")"),F="S(".concat(v,"/").concat(w,")")),r.a.createElement("div",{id:"basketOrderDialog",style:{display:h?"none":"block"},className:"modal"},r.a.createElement("div",{style:{width:"930px"},className:"modal-content"},r.a.createElement("div",{className:"orderStatusView"},m," ",r.a.createElement("div",{className:"openPosition"},"(",C,"/",T,")")),r.a.createElement("span",{onClick:o,className:"close"},"\xd7"),r.a.createElement("div",{className:"basket-orders"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:function(a){e.selectRows(t)},onDoubleClick:function(t){e.uncheckAllRow()}},"Select"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"PnL"),r.a.createElement("th",null,"Q(M)"),r.a.createElement("th",{onDoubleClick:function(t){e.uncheckPositionWithCNCnMIS()}},"Q(H)"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Change"),r.a.createElement("th",null,"LTP"),r.a.createElement("th",null,"Qty"),r.a.createElement("th",null,"Price"),p.buyView&&r.a.createElement("th",null,"BUY"),p.sellView&&r.a.createElement("th",null,"SELL"))),r.a.createElement("tbody",null,t.map((function(t,a){return r.a.createElement(W,{updateFillOrderRequest:e.updateFillOrderRequest,fetchPositionData:e.fetchPositionData,updateMarginData:d,positionsdata:O[t],ref:function(a){return e.rowfRefs["MIS-"+t]=a},orderType:f,orderWindowView:p,onTableRowclick:c,addToFavList:l,removeFromFavList:s,tableId:i,updateOrderStatus:e.updateOrderStatus,key:"MIS-"+t,kitedata:n,symbol:t})}))))),r.a.createElement("button",{className:"favButton",onClick:function(t){e.setState({isHideDialog:!0})},type:"button"},"H"),r.a.createElement("button",{className:"favButton",onClick:this.toogleSellView,type:"button"},"S"),r.a.createElement("button",{className:"favButton",onClick:this.toogleBuyView,type:"button"},"B"),r.a.createElement("div",{style:{marginLeft:"10px"},className:"dropdown"},r.a.createElement("button",{style:{fontSize:"15px",backgroundColor:g||k||E||S||b?"red":"initial"},className:"dropbtn"},"Srt"),r.a.createElement("div",{className:"dropdown-content",style:{bottom:"0px"}},r.a.createElement("a",{style:{backgroundColor:g?"red":"initial"},onClick:function(t){e.setSortOrder("isSortPosition")}},"Loss"),r.a.createElement("a",{style:{backgroundColor:k?"red":"initial"},onClick:function(t){e.setSortOrder("isSortOnValue")}},"Total Value"),r.a.createElement("a",{style:{backgroundColor:E?"red":"initial"},onClick:function(t){e.previosChangeSortedOrder=void 0,e.setSortOrder("isSortOnPriceChange")}},"Change"),r.a.createElement("a",{style:{backgroundColor:b?"red":"initial"},onClick:function(t){e.setSortOrder("isSortOnDayQty")}},"Q(H)"),r.a.createElement("a",{style:{backgroundColor:S?"red":"initial"},onClick:function(t){e.setSortOrder("isSortOnMISQty")}},"Q(M)"))),r.a.createElement("button",{className:"favButton",onClick:this.onSQOFFClick,type:"button"},"SQFF"),r.a.createElement("button",{className:"favButton",onClick:this.onTpriceClick,type:"button"},"Tpri"),r.a.createElement("button",{className:"favButton",onClick:this.fillQtyForValue,type:"button"},"Fill Qty"),r.a.createElement("div",{style:{marginLeft:"10px"},className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},"Mark"),r.a.createElement("div",{className:"dropdown-content",style:{bottom:"0px"}},r.a.createElement("a",null,"Chg% < X "),r.a.createElement("a",null,"Chg% > X "),r.a.createElement("a",null,"Chg% [x,y]"),r.a.createElement("a",null,"Profit% < X "),r.a.createElement("a",null,"Profit% > X "),r.a.createElement("a",null,"Profit [x,y]"))),r.a.createElement("div",{className:"orderType"},r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_MARKET",checked:"MARKET"==f,value:"MARKET"}),r.a.createElement("label",{for:"ORDER_TYPE_MARKET"},"M"),r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_LIMIT",checked:"LIMIT"==f,value:"LIMIT"}),r.a.createElement("label",{for:"ORDER_TYPE_LIMIT"},"L"),r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_SL_MARKET",checked:"SL_MARKET"==f,value:"SL_MARKET"}),r.a.createElement("label",{for:"ORDER_TYPE_SL_MARKET"},"SL_M")),r.a.createElement("select",{className:"selectSymbolsBasket",onChange:this.onSymbolSelect},t.map((function(e,t){return r.a.createElement("option",{value:e},e)}))),p.buyView&&r.a.createElement("button",{className:"builkOrderBtn favButton buyButton",onClick:this.placeBuyOrderForselectedRow,type:"button"},_),p.sellView&&r.a.createElement("button",{className:"builkOrderBtn favButton sellButton",onClick:this.placeSellOrderForselectedRow,type:"button"},F)))}}]),a}(r.a.Component),W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).uncheckPositionWithCNCnMIS=function(){var e=n.props.positionsdata,t=0;return e&&e.dayCNC&&(t=e.dayCNC.quantity),e&&e.quantity,t<0&&(n.markCheckBox(!1),!0)},n.fillInputWithLatestPrice=function(){var e=n.props,t=e.kitedata,a=e.symbol;t.ticks[a].depth&&n.setState({quantity:0,price:t.ticks[a].lastTradedPrice})},n.fillQtyForValue=function(e){var t=n.props,a=t.kitedata,r=t.symbol,o=a.ticks[r].lastTradedPrice,i=Number.parseInt(e/o);return n.setState({quantity:i}),i*o},n.onInputValueChange=function(e){var t=n.state,a=t.quantity,r=t.price,o=t.isRowEnable;"quantity"==e.target.name?(a=e.target.value,n.setState({quantity:a})):"price"==e.target.name?(r=e.target.value,n.setState({price:r})):"checkbox"==e.target.name&&(o=e.target.checked,n.setState({isRowEnable:o}))},n.fillQtyValueOnSqOffClick=function(e){var t=n.props,a=t.positionsdata,r=t.kitedata,o=t.symbol,i=0;if(a){var l=Number.parseInt(Math.abs(a.quantity*e/100));n.setState({quantity:l}),0==l?n.markCheckBox(!1):n.markCheckBox(!0),i=l*r.ticks[o].lastTradedPrice}return i},n.fillPriceValueOnTpriceClick=function(e){var t=n.props,a=t.positionsdata,r=t.kitedata,o=t.symbol,i=n.state,l=i.quantity,s=i.price,c=0;if(a){var d=r.ticks[o].lastTradedPrice,u=d*e/100;s=a.quantity>=0?d-u:d+u,n.setState({price:s.toFixed(1)}),c=l*s}return c},n.onOrderSuccess=function(e){var t=n.props,a=t.updateOrderStatus,r=t.updateMarginData,o=t.fetchPositionData,i=t.updateFillOrderRequest,l=n.state.pendingOrderRequest;r(),o(),a(e.data.order_id),n.setState({quantity:0,isRowEnable:!1,pendingOrderRequest:l-1}),n.markCheckBox(!1),i()},n.onOrderError=function(e){var t=n.props,a=t.updateOrderStatus,r=t.updateMarginData,o=t.fetchPositionData,i=t.updateFillOrderRequest,l=n.state.pendingOrderRequest;r(),o(),a(e.message),n.setState({quantity:0,isRowEnable:!1,pendingOrderRequest:l-1}),n.markCheckBox(!1),i()},n.markCheckBox=function(e){n.setState({isRowEnable:e})},n.isCheckBoxChecked=function(){return 1==n.state.isRowEnable},n.getPendingOrderRequest=function(){return n.state.pendingOrderRequest},n.getOrderValue=function(){var e=n.state,t=e.quantity,a=e.price;return Math.abs(t)*a},n.sendBuyOrderRequest=function(){var e=n.state,t=e.quantity,a=e.price,r=e.pendingOrderRequest,o=n.props,i=o.kitedata,l=o.symbol,s=o.updateOrderStatus,c=o.orderType;"MARKET"==c?(I({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError),s(l+" -> BUY  -> MARKET -> MIS ->        Q: "+t+"   P: "+a)):"LIMIT"==c?(R({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError),s(l+" -> BUY  -> LIMIT -> MIS ->        Q: "+t+"   P: "+a)):"SL_MARKET"==c&&(M({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"BUY",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError),s(l+" -> BUY  -> SL-MARKET -> MIS ->        Q: "+t+"   TP: "+a)),n.setState({quantity:0,pendingOrderRequest:r+1})},n.sendSellOrderRequest=function(){var e=n.state,t=e.quantity,a=e.price,r=e.pendingOrderRequest,o=n.props,i=o.kitedata,l=o.symbol,s=o.updateOrderStatus,c=o.orderType;"MARKET"==c?(q({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError),s(l+" -> SELL  -> MARKET -> MIS ->        Q: "+t+"   P: "+a)):"LIMIT"==c?(N({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError),s(l+" -> SELL  -> LIMIT -> MIS ->        Q: "+t+"   P: "+a)):"SL_MARKET"==c&&(D({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"SELL",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError),s(l+" -> SELL  -> SL-MARKET -> MIS ->        Q: "+t+"   TP: "+a)),n.setState({quantity:0,pendingOrderRequest:r+1})},n.openStockInfo=function(){n.props.onTableRowclick(n.props.symbol)},n.state={isRowEnable:!1,pendingOrderRequest:0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fillInputWithLatestPrice()}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=t.symbol,o=(t.tableId,t.addToFavList),i=(t.removeFromFavList,t.onTableRowclick,t.orderWindowView),l=t.positionsdata,s=this.state,c=s.quantity,d=s.price,u=s.isRowEnable,m=s.pendingOrderRequest,p="";a.ticks[n]&&(p=a.ticks[n].change<0?"red":"green");var h={};u&&(h.backgroundColor="grey"),l&&l.quantity>0?h.borderLeft="20px solid lightgreen":l&&l.quantity<0?h.borderLeft="20px solid red":h.borderLeft="20px solid white";var y={};0!=m&&(y.backgroundColor="gold");var f=0,g=0;l&&l.dayCNC&&(f=l.dayCNC.quantity),l&&(g=l.quantity);var k=f<0?"red":"green",E=g<0?"red":"green";return r.a.createElement("tr",{style:y,rowId:"MIS_ORDER-"+n},r.a.createElement("td",{onClick:function(t){e.setState({isRowEnable:!u})},style:h},r.a.createElement("input",{tabIndex:"-1",style:{width:"20px",height:"20px"},onChange:this.onInputValueChange,type:"checkbox",name:"checkbox",checked:u})),r.a.createElement("td",{onDoubleClick:function(e){o(n,"MIS")}},n,r.a.createElement("span",{className:"exchangeSuffix"},"\xa0\xa0",a.ticks[n].exchange)),r.a.createElement("td",{className:l&&l.pnl<0?"red":"green"},l?l.pnl.toFixed(1):""),r.a.createElement("td",{className:E},0==g?"":g),r.a.createElement("td",{className:k+" holdingQty"},0==f?"":f),r.a.createElement("td",null,r.a.createElement("span",{className:"misValue"},l&&0!=l.quantity?Math.round(l.value/1e3)+"k":"")),r.a.createElement("td",{onClick:this.openStockInfo,className:p},a.ticks[n].change.toFixed(2),"%"),r.a.createElement("td",null,a.ticks[n].lastTradedPrice),r.a.createElement("td",null,r.a.createElement("input",{type:"number",autoComplete:"off",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"quantity",step:1,name:"quantity",min:"1",max:"1000",value:c})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",tabIndex:"-1",autoComplete:"off",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"price",step:.2,name:"price",min:"1",max:"10000",value:d})),i.buyView&&r.a.createElement("td",null,r.a.createElement("button",{style:{backgroundColor:0!=m?"grey":"green"},className:"buyButton",onClick:this.sendBuyOrderRequest}," BUY ")),i.sellView&&r.a.createElement("td",null," ",r.a.createElement("button",{style:{backgroundColor:0!=m?"grey":"#e86666"},className:"sellButton",onClick:this.sendSellOrderRequest}," SELL ")))}}]),a}(r.a.Component),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.kitedata,a=e.symbol,n=e.hideFundamentalsDialog,o="https://kite.zerodha.com/chart/ext/tvc/"+t.ticks[a].exchange+"/"+t.ticks[a].tradingsymbol+"/"+t.ticks[a].token,i="https://stocks.tickertape.in/"+a+"?broker=kite";return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{style:{width:"1200px"},className:"modal-content"},r.a.createElement("span",{onClick:n,className:"close"},"\xd7"),r.a.createElement("div",{className:"fundamental-dialog"},r.a.createElement("iframe",{className:"graphFrame",src:o}),r.a.createElement("iframe",{style:{height:"1000px"},className:"graphFrame",src:"https://www.screener.in/company/"+(a.endsWith("-BE")?a.replace("-BE",""):a)+"/consolidated/"}),r.a.createElement("iframe",{className:"fundamentalFrame",src:i}))))}}]),a}(r.a.Component),J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).checkTime=function(e){return e<10&&(e="0"+e),e},n.startTime=function(e){var t=new Date,a=t.getHours(),r=t.getMinutes(),o=t.getSeconds();r=n.checkTime(r),o=n.checkTime(o),n.timeInterval=setTimeout(function(){this.startTime()}.bind(Object(c.a)(n)),500),n.setState({currentTime:a+":"+r+":"+o})},n.state={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.timeInterval=setInterval(this.startTime,500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeInterval)}},{key:"render",value:function(){var e=this.state.currentTime;return r.a.createElement("div",{className:"currentTime"},e)}}]),a}(r.a.Component),z=a(10),X=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onInputValueChange=function(e){var t=n.state.searchValue,a=n.props,r=a.kitedata,o=a.onTableRowclick;if("searchInput"==e.target.name){var i={};if((t=e.target.value.toUpperCase()).length>2){var l=document.querySelectorAll('tr[rowid*="'+t+'"]');if(l&&l.length>0)for(var s=0;s<l.length;s++){var c=l[s].attributes.rowid.value.replace("1-","").replace("2-","").replace("3-","").replace("0-","").replace("RES-","").replace("MIS-","").replace("POS-","").replace("HOLD-","").replace("MIS_ORDER-","");r.ticks[c]&&(i[c]=r.ticks[c].name)}}r.ticks[t]&&o(t),n.setState({searchValue:t,rowMap:i})}},n.state={searchValue:void 0},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.searchValue,n=t.rowMap,o=this.props;o.kitedata,o.onTableRowclick;return r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},r.a.createElement(z.c,{className:"appicon"})),r.a.createElement("div",{className:"dropdown-content searchList"},r.a.createElement("input",{list:"searchDataList",className:"searchInput",type:"text",name:"searchInput",ref:function(t){return e.searchInput=t},onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,value:a}),r.a.createElement("datalist",{id:"searchDataList"},n&&Object.keys(n).map((function(e,t){return r.a.createElement("option",{value:e},n[e])})))))}}]),a}(r.a.Component),Z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onTableRowclick=function(e,t){var a=n.props,r=a.kitedata;(0,a.onTableRowclick)(e,t,!1);var o="https://kite.zerodha.com/chart/ext/tvc/"+r.ticks[e].exchange+"/"+r.ticks[e].tradingsymbol+"/"+r.ticks[e].token;n.setState({hrefGraph:o,symbol:e})},n.onSymbolSelect=function(e){var t=document.querySelectorAll('.allStocksScreener tr[rowid="'+e.target.value+'"]');t&&t.length>0&&(t[0].scrollIntoView(),t[0].classList.remove("blinkRow"),setTimeout((function(e){document.querySelectorAll('.allStocksScreener tr[rowid="'+e+'"]')[0].classList.add("blinkRow")}),50,e.target.value),n.onTableRowclick(e.target.value))};for(var r=e.kitedata,o=Object.keys(r.ticks),i=[],s=0;s<o.length;s++)"NFO"!=r.ticks[o[s]].exchange&&i.push(o[s]);return i.sort((function(e,t){return r.ticks[t].change-r.ticks[e].change})),n.state={symbolList:i},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.kitedata,a=(e.onTableRowclick,e.showToast,e.addToFavList),n=this.state,o=n.symbolList,i=n.hrefGraph,l=n.symbol;return r.a.createElement("div",{className:"allStocksScreener"},t&&r.a.createElement("div",{className:"tableContainer watchlistclass"},r.a.createElement(m,{onTableRowclick:this.onTableRowclick,kitedata:t,symbolList:o})),i&&r.a.createElement("iframe",{className:"screenerFrame",src:i}),r.a.createElement("div",{className:"screenerToolbar"},r.a.createElement("div",null,"S: ",l),r.a.createElement("button",{className:"favButton green",onClick:function(e){a(l,"0")},type:"button"},"A 0"),r.a.createElement("button",{className:"favButton green",onClick:function(e){a(l,"MIS")},type:"button"},"MIS"),r.a.createElement("select",{className:"",onChange:this.onSymbolSelect},o.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))))}}]),a}(r.a.Component),$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fetchAllKiteSectorList=function(){fetch(window.domain+"kiteAllSector.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.kiteSectorList=e;for(var t=this.props.kitedata,a=0;a<this.kiteSectorList.length;a++)this.kiteSectorList[a].list.sort((function(e,a){var n=t.ticks[e]?t.ticks[e].change:-100;return(t.ticks[a]?t.ticks[a].change:-100)-n}));this.setState({kiteSectorList:this.kiteSectorList})}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.onTableRowclick=function(e,t){(0,n.props.onTableRowclick)(e,t,!1),n.setState({symbol:e})},n.state={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchAllKiteSectorList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=(t.onTableRowclick,t.addToFavList),o=this.state,i=o.symbol,l=o.kiteSectorList;return r.a.createElement("div",{className:"allSectorScreener"},a&&l&&l.map((function(t,n){return r.a.createElement("div",{key:n,className:"tableContainer watchlistclass"},r.a.createElement(m,{onTableRowclick:e.onTableRowclick,kitedata:a,symbolList:t.list,tableName:t.sector}))})),r.a.createElement("div",{className:"screenerToolbar"},r.a.createElement("div",null,"S: ",i),r.a.createElement("button",{className:"favButton green",onClick:function(e){n(i,"0")},type:"button"},"A 0"),r.a.createElement("button",{className:"favButton green",onClick:function(e){n(i,"MIS")},type:"button"},"MIS")))}}]),a}(r.a.Component),ee=a(9),te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).formatData=function(e){n.performanceHistory=e;for(var t={},a=Object.keys(n.performanceHistory.ticks),r=0;r<a.length;r++){var o=JSON.parse(n.performanceHistory.ticks[a[r]]).data.candles;t[a[r]]={},t[a[r]].tradingsymbol=a[r];var i=void 0,l=void 0,s=void 0,c=void 0,d=void 0,u=void 0,m=void 0,p=void 0,h=void 0,y=void 0,f=void 0,g=void 0,k=void 0,E=void 0,b=void 0,S=void 0,v=void 0,w=void 0,O=void 0,C=void 0,T=void 0;if(o){var R=o,N=R.length-1,I=R[N][4];i=Number.parseInt(100*-(R[N-1][4]-I)/R[N-1][4]),l=Number.parseInt(100*-(R[N-2][4]-I)/R[N-2][4]),s=Number.parseInt(100*-(R[N-3][4]-I)/R[N-3][4]),c=Number.parseInt(100*-(R[N-4][4]-I)/R[N-4][4]),d=Number.parseInt(100*-(R[N-5][4]-I)/R[N-5][4]),u=Number.parseInt(100*-(R[N-6][4]-I)/R[N-6][4]),m=Number.parseInt(100*-(R[N-5][4]-I)/R[N-5][4]),p=Number.parseInt(100*-(R[N-10][4]-I)/R[N-10][4]),h=Number.parseInt(100*-(R[N-15][4]-I)/R[N-15][4]),y=Number.parseInt(100*-(R[N-20][4]-I)/R[N-20][4]),N-23>0&&(f=Number.parseInt(100*-(R[N-23][4]-I)/R[N-23][4])),N-46>0&&(g=Number.parseInt(100*-(R[N-46][4]-I)/R[N-46][4])),N-69>0&&(k=Number.parseInt(100*-(R[N-69][4]-I)/R[N-69][4])),N-95>0&&(E=Number.parseInt(100*-(R[N-95][4]-I)/R[N-95][4])),N-123>0&&(b=Number.parseInt(100*-(R[N-123][4]-I)/R[N-123][4])),N-140>0&&(S=Number.parseInt(100*-(R[N-140][4]-I)/R[N-140][4])),N-269>0&&(v=Number.parseInt(100*-(R[N-269][4]-I)/R[N-269][4])),N-540>0&&(w=Number.parseInt(100*-(R[N-540][4]-I)/R[N-540][4])),N-807>0&&(O=Number.parseInt(100*-(R[N-807][4]-I)/R[N-807][4])),N-1076>0&&(C=Number.parseInt(100*-(R[N-1076][4]-I)/R[N-1076][4])),N-1150>0&&(T=Number.parseInt(100*-(R[0][4]-I)/R[0][4]))}t[a[r]].d1=i,t[a[r]].d2=l,t[a[r]].d3=s,t[a[r]].d4=c,t[a[r]].d5=d,t[a[r]].d6=u,t[a[r]].w1=m,t[a[r]].w2=p,t[a[r]].w3=h,t[a[r]].w4=y,t[a[r]].m1=f,t[a[r]].m2=g,t[a[r]].m3=k,t[a[r]].m4=E,t[a[r]].m5=b,t[a[r]].m6=S,t[a[r]].y1=v,t[a[r]].y2=w,t[a[r]].y3=O,t[a[r]].y4=C,t[a[r]].y5=T}n.setState({performanceHistory:t,symbolList:Object.keys(t)})},n.fetchPerformanceTicksData=function(){fetch(window.domain+"performaneHistorykite.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.formatData(e)}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.onTableRowclick=function(e,t){var a=n.props,r=a.kitedata;(0,a.onTableRowclick)(e,t,!1);var o="https://kite.zerodha.com/chart/ext/tvc/"+r.ticks[e].exchange+"/"+r.ticks[e].tradingsymbol+"/"+r.ticks[e].token;n.setState({hrefGraph:o,symbol:e})},n.onSymbolSelect=function(e){var t=document.querySelectorAll('.performanceScreener tr[rowid="'+e.target.value+'"]');t&&t.length>0&&(t[0].scrollIntoView(),t[0].classList.remove("blinkRow"),setTimeout((function(e){document.querySelectorAll('.performanceScreener tr[rowid="'+e+'"]')[0].classList.add("blinkRow")}),50,e.target.value),n.onTableRowclick(e.target.value))},n.sortonKey=function(e){var t=n.state,a=t.performanceHistory;t.symbolList.sort((function(t,n){var r=void 0!=a[t][e]?a[t][e]:-9999;return(void 0!=a[n][e]?a[n][e]:-9999)-r}))};var r=e.kitedata;return n.symbolList=Object.keys(r.ticks),n.performanceHistory=void 0!=localStorage.getItem("performanceHistory")?JSON.parse(localStorage.getItem("performanceHistory")):{},n.state={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchPerformanceTicksData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=(t.showToast,t.addToFavList),o=this.state,i=o.performanceHistory,l=o.symbol,s=o.hrefGraph,c=o.symbolList;return r.a.createElement("div",{className:"performanceScreener"},i&&r.a.createElement("div",null,"Time: ",this.performanceHistory.time?this.performanceHistory.time:"no data",r.a.createElement("div",{className:"tableContainer watchlistclass"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{onClick:function(t){e.sortonKey("d1")}},"d1"),r.a.createElement("th",{onClick:function(t){e.sortonKey("d2")}},"d2"),r.a.createElement("th",{onClick:function(t){e.sortonKey("d3")}},"d3"),r.a.createElement("th",{onClick:function(t){e.sortonKey("d4")}},"d4"),r.a.createElement("th",{onClick:function(t){e.sortonKey("d5")}},"d5"),r.a.createElement("th",{onClick:function(t){e.sortonKey("d6")}},"d6"),r.a.createElement("th",{onClick:function(t){e.sortonKey("w1")}},"w1"),r.a.createElement("th",{onClick:function(t){e.sortonKey("w2")}},"w2"),r.a.createElement("th",{onClick:function(t){e.sortonKey("w3")}},"w3"),r.a.createElement("th",{onClick:function(t){e.sortonKey("w4")}},"w4"),r.a.createElement("th",{onClick:function(t){e.sortonKey("m1")}},"m1"),r.a.createElement("th",{onClick:function(t){e.sortonKey("m2")}},"m2"),r.a.createElement("th",{onClick:function(t){e.sortonKey("m3")}},"m3"),r.a.createElement("th",{onClick:function(t){e.sortonKey("m4")}},"m4"),r.a.createElement("th",{onClick:function(t){e.sortonKey("m5")}},"m5"),r.a.createElement("th",{onClick:function(t){e.sortonKey("m6")}},"m6"),r.a.createElement("th",{onClick:function(t){e.sortonKey("y1")}},"y1"),r.a.createElement("th",{onClick:function(t){e.sortonKey("y2")}},"y2"),r.a.createElement("th",{onClick:function(t){e.sortonKey("y3")}},"y3"),r.a.createElement("th",{onClick:function(t){e.sortonKey("y4")}},"y4"),r.a.createElement("th",{onClick:function(t){e.sortonKey("y5")}},"y5"))),r.a.createElement("tbody",null,c.map((function(t,n){return r.a.createElement(ae,{onTableRowclick:e.onTableRowclick,key:t+n,kitedata:a,performanceData:i[t]})}))))),s&&r.a.createElement("iframe",{className:"screenerFrame",src:s})),r.a.createElement("div",{className:"screenerToolbar"},r.a.createElement("div",null,"S: ",l),r.a.createElement("button",{className:"favButton green",onClick:function(e){n(l,"0")},type:"button"},"A 0"),r.a.createElement("button",{className:"favButton green",onClick:function(e){n(l,"MIS")},type:"button"},"MIS"),r.a.createElement("select",{className:"",onChange:this.onSymbolSelect},this.symbolList.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))))}}]),a}(r.a.Component),ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onTableRowclick=function(){n.props.onTableRowclick(n.props.performanceData.tradingsymbol,n.props.tableId)},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this.props,a=(t.kitedata,t.performanceData);t.onTableRowclick;return r.a.createElement("tr",(e={onClick:this.openStockInfo},Object(ee.a)(e,"onClick",this.onTableRowclick),Object(ee.a)(e,"rowId",a.tradingsymbol),e),r.a.createElement("td",null,a.tradingsymbol),r.a.createElement("td",{style:{color:a.d1>0?"green":"red"}},a.d1),r.a.createElement("td",{style:{color:a.d2>0?"green":"red"}},a.d2),r.a.createElement("td",{style:{color:a.d3>0?"green":"red"}},a.d3),r.a.createElement("td",{style:{color:a.d4>0?"green":"red"}},a.d4),r.a.createElement("td",{style:{color:a.d5>0?"green":"red"}},a.d5),r.a.createElement("td",{style:{color:a.d6>0?"green":"red"}},a.d6),r.a.createElement("td",{style:{color:a.w1>0?"green":"red"}},a.w1),r.a.createElement("td",{style:{color:a.w2>0?"green":"red"}},a.w2),r.a.createElement("td",{style:{color:a.w3>0?"green":"red"}},a.w3),r.a.createElement("td",{style:{color:a.w4>0?"green":"red"}},a.w4),r.a.createElement("td",{style:{color:a.m1>0?"green":"red"}},a.m1),r.a.createElement("td",{style:{color:a.m2>0?"green":"red"}},a.m2),r.a.createElement("td",{style:{color:a.m3>0?"green":"red"}},a.m3),r.a.createElement("td",{style:{color:a.m4>0?"green":"red"}},a.m4),r.a.createElement("td",{style:{color:a.m5>0?"green":"red"}},a.m5),r.a.createElement("td",{style:{color:a.m6>0?"green":"red"}},a.m6),r.a.createElement("td",{style:{color:a.y1>0?"green":"red"}},a.y1),r.a.createElement("td",{style:{color:a.y2>0?"green":"red"}},a.y2),r.a.createElement("td",{style:{color:a.y3>0?"green":"red"}},a.y3),r.a.createElement("td",{style:{color:a.y4>0?"green":"red"}},a.y4),r.a.createElement("td",{style:{color:a.y5>0?"green":"red"}},a.y5),r.a.createElement("td",{style:{color:a.y6>0?"green":"red"}},a.y6))}}]),a}(r.a.Component),ne=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setUrl=function(e){switch(e){case"ATH":n.setState({srcUrl:"https://www.screener.in/screen/raw/?sort=Return+on+capital+employed&order=desc&source=225544&query=Current+price+%3E+High+price+all+time+*+.90+AND%0D%0AMarket+Capitalization+%3E+300"});break;case"52WH":n.setState({srcUrl:"https://www.screener.in/screen/raw/?sort=&order=&source=194743&query=Down+from+52w+high+%3C10%25+AND%0D%0AMarket+Capitalization+%3E300"});break;case"Growth":n.setState({srcUrl:"https://www.screener.in/screen/raw/?sort=short_name&order=asc&source=86&query=Net+Profit+latest+quarter+%3E+Net+Profit+preceding+quarter+AND%0D%0ANet+Profit+preceding+quarter+%3E+Net+profit+2quarters+back+AND%0D%0ANet+profit+2quarters+back+%3E+Net+profit+3quarters+back+AND%0D%0AMarket+Capitalization+%3E+300%0D%0A&latest=on"});break;case"Dividend":n.setState({srcUrl:"https://www.screener.in/screens/3/Highest-Dividend-Yield-Shares/?sort=Dividend+yield&order=desc"});break;case"Debtfree":n.setState({srcUrl:"https://www.screener.in/screen/raw/?sort=Return+on+equity&order=desc&source=27897&query=Debt+%3D0+and+%0D%0ASales+growth++and+%0D%0AMarket+Capitalization+%3E300&latest=on"});break;case"High-ROE":n.setState({srcUrl:"https://www.screener.in/screens/136413/High-ROE-Stocks/"});break;case"52w-doublers":n.setState({srcUrl:"https://www.screener.in/screens/1937/52w-doublers/"});break;case"NSE Index":n.setState({srcUrl:"https://www.nseindia.com/market-data/live-equity-market?symbol=NIFTY%2050"});break;default:n.setState({srcUrl:"https://www.screener.in"})}},n.state={srcUrl:"https://www.screener.in"},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"allStocksScreener"},r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("ATH")},type:"button"},"ATH"),r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("52WH")},type:"button"},"52Wh"),r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("Growth")},type:"button"},"Growth"),r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("Dividend")},type:"button"},"Dividend"),r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("Debtfree")},type:"button"},"Debtfree"),r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("High-ROE")},type:"button"},"High-ROE"),r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("52w-doublers")},type:"button"},"52w-doublers"),r.a.createElement("button",{className:"favButton screenerButton",onClick:function(t){e.setUrl("NSE Index")},type:"button"},"NSE Index"),r.a.createElement("iframe",{className:"tradingviewFrame",src:this.state.srcUrl}))}}]),a}(r.a.Component),re=a(62),oe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).escFunction=function(e){27===e.keyCode&&n.hideScreener()},n.showScreener=function(e){n.setState({isShowScreener:!0,isShowAllStockScreener:!1,isShowAllSectorScreener:!1,isShowPerformanceScreener:!1,isTradingview:!1});var t={};t[e]=!0,n.setState(t)},n.hideScreener=function(){n.setState({isShowScreener:!1})},n.state={isShowScreener:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.escFunction,!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=t.onTableRowclick,o=(t.showToast,t.addToFavList),i=this.state,l=i.isShowScreener,s=i.isShowAllStockScreener,c=i.isShowAllSectorScreener,d=i.isShowPerformanceScreener,u=i.isTradingview;return r.a.createElement("div",{className:"screener"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},r.a.createElement(re.a,{className:"appicon"})),r.a.createElement("div",{className:"dropdown-content screenerList"},r.a.createElement("a",{onClick:function(t){e.showScreener("isShowAllStockScreener")}},"All Stocks"),r.a.createElement("a",{onClick:function(t){e.showScreener("isShowAllSectorScreener")}},"All Sectors"),r.a.createElement("a",{onClick:function(t){e.showScreener("isShowPerformanceScreener")}},"Performance"),r.a.createElement("a",{onClick:function(t){e.showScreener("isTradingview")}},"Screener"))),1==l&&r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{onClick:function(t){e.hideScreener()},className:"close"},"\xd7"),r.a.createElement("div",{className:"screener-dialog"},s&&r.a.createElement(Z,{addToFavList:o,kitedata:a,onTableRowclick:n}),c&&r.a.createElement($,{addToFavList:o,kitedata:a,onTableRowclick:n}),d&&r.a.createElement(te,{addToFavList:o,kitedata:a,onTableRowclick:n}),u&&r.a.createElement(ne,null)))))}}]),a}(r.a.Component),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).toogleBuyView=function(){var e=n.state.orderWindowView;e.buyView=!e.buyView,n.setState({orderWindowView:e}),localStorage.setItem("holdingOrderWindowView",JSON.stringify(e))},n.toogleSellView=function(){var e=n.state.orderWindowView;e.sellView=!e.sellView,n.setState({orderWindowView:e}),localStorage.setItem("holdingOrderWindowView",JSON.stringify(e))},n.toogleSellBuyCNCMISView=function(){var e=n.state.orderWindowView;e.sellBuyCNCMISView=!e.sellBuyCNCMISView,n.setState({orderWindowView:e}),localStorage.setItem("holdingOrderWindowView",JSON.stringify(e))},n.saveHoldingRowOrder=function(e){var t=n.state.holdingOrder,a=t.indexOf(e);a>0&&t.splice(a,1),t.unshift(e),n.setState({holdingOrder:t}),localStorage.setItem("holdingRowOrder",JSON.stringify(t))},n.onPositionSuccess=function(e){n.setState({positionsdata:e})},n.onPositionError=function(e){n.updateOrderStatus("Error in fetching position")},n.fetchPositionData=function(e){j(n.onPositionSuccess,n.onPositionError)},n.onHoldingSuccess=function(e){n.setState({holdingsdata:e})},n.onHoldingError=function(e){n.updateOrderStatus("Error in fetching holding")},n.fetchHoldingData=function(e){var t,a;t=n.onHoldingSuccess,a=n.onHoldingError,fetch("https://kite.zerodha.com/oms/portfolio/holdings",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey}}).then((function(e){return e.json()})).then((function(e){"success"==e.status?t(e):"error"==e.status&&a(e)})).catch((function(e){console.error(e),a(e)}))},n.updateOrderStatus=function(e){n.setState({orderStatus:e})},n.showDialog=function(e){n.setState({isHideDialog:!1})},n.updateFillOrderRequest=function(){var e=n.state,t=e.totalOrderRequest,a=e.totalFillOrderRequest;void 0!=t&&(a++,n.setState({totalFillOrderRequest:a}),a==t&&n.setState({totalOrderRequest:void 0,totalFillOrderRequest:void 0}))},n.checkFoPendingRequest=function(){for(var e=n.state,t=e.totalOrderRequest,a=e.totalFillOrderRequest,r=0,o=0,i=Object.keys(n.rowfRefs);o<i.length;o++){var l=i[o];r+=n.rowfRefs[l].getPendingOrderRequest()}return(void 0!=t||0!=r)&&(window.alert("Request pending -> All "+r+" Bulk : "+(t-a)),!0)},n.totalSelectedRows=function(){for(var e=0,t=0,a=Object.keys(n.rowfRefs);t<a.length;t++){var r=a[t];n.rowfRefs[r].isCheckBoxChecked()&&e++}return e},n.placeBuyOrderForselectedRow=function(){if(!n.checkFoPendingRequest()){var e=n.state,t=e.totalOrderRequest;e.totalFillOrderRequest;if(t=n.totalSelectedRows(),window.confirm("BUY order for all selected rows confirm : "+t)&&t>0){n.setState({totalOrderRequest:t,totalFillOrderRequest:0});for(var a=0,r=Object.keys(n.rowfRefs);a<r.length;a++){var o=r[a],i=n.rowfRefs[o];i.isCheckBoxChecked()&&i.sendBuyOrderRequest()}}}},n.placeSellOrderForselectedRow=function(e){if(!n.checkFoPendingRequest()){var t=n.state,a=t.totalOrderRequest;t.totalFillOrderRequest;if(a=n.totalSelectedRows(),window.confirm("SELL order for all selected rows confirm : "+a)&&a>0){n.setState({totalOrderRequest:a,totalFillOrderRequest:0});for(var r=0,o=Object.keys(n.rowfRefs);r<o.length;r++){var i=o[r],l=n.rowfRefs[i];l.isCheckBoxChecked()&&l.sendSellOrderRequest()}}}},n.onSQOFFClick=function(){if(!n.checkFoPendingRequest()){var e=n.totalSelectedRows(),t=!1;0!=e&&(t=window.confirm("SQ only selected rows:"+e));var a=window.prompt("selected position "+(t?e:" ALL ")+" Percetage to SQ OFF ->");if(null!=a&&""!=a&&!isNaN(a)&&a>20)window.alert("HOLDINGS SQOFF ALERT > 20% doing nothing");else{null!=a&&""!=a&&!isNaN(a)&&a>10&&window.alert("HOLDINGS SQOFF ALERT > 10%");var r=0;if(null!=a&&""!=a&&!isNaN(a))for(var o=0,i=Object.keys(n.rowfRefs);o<i.length;o++){var l=i[o],s=n.rowfRefs[l];t&&!s.isCheckBoxChecked()||(r+=s.fillQtyValueOnSqOffClick(a))}n.updateOrderStatus("Order Value -> "+(r/1e3).toFixed(1)+"K")}}},n.onTpriceClick=function(){if(!n.checkFoPendingRequest()){var e=n.totalSelectedRows(),t=window.prompt("Position selected "+e+" Stop Loss %"),a=0;if(null!=t&&""!=t&&!isNaN(t))for(var r=0,o=Object.keys(n.rowfRefs);r<o.length;r++){var i=o[r],l=n.rowfRefs[i];l.isCheckBoxChecked()&&(a+=l.fillPriceValueOnTpriceClick(t))}n.updateOrderStatus("Order Value -> "+(a/1e3).toFixed(1)+"K")}},n.fillQtyForValue=function(){if(!n.checkFoPendingRequest()){var e=n.totalSelectedRows(),t=window.prompt("Build Position "+e+" for amount ->"),a=0;if(null!=t&&""!=t&&!isNaN(t)){for(var r=0,o=Object.keys(n.rowfRefs);r<o.length;r++){var i=o[r],l=n.rowfRefs[i];l.isCheckBoxChecked()&&(a+=l.fillQtyForValue(t))}n.updateOrderStatus("Order Value -> "+(a/1e3).toFixed(1)+"K")}}},n.exitSoldPosition=function(){if(!n.checkFoPendingRequest()){var e=n.totalSelectedRows(),t=!1;0!=e&&(t=window.confirm("Exit only selected rows:"+e));var a=window.prompt("Exit position "+(t?e:" ALL ")+" Percetage to Exit(%) ->");if(null!=a&&""!=a&&!isNaN(a)&&a>100)window.alert("Exit % ALERT > 100% doing nothing");else{null!=a&&""!=a&&!isNaN(a)&&a>50&&window.alert("Exit %  ALERT > 50%");var r=0;if(null!=a&&""!=a&&!isNaN(a))for(var o=0,i=Object.keys(n.rowfRefs);o<i.length;o++){var l=i[o],s=n.rowfRefs[l];t&&!s.isCheckBoxChecked()||(r+=s.exitSoldPosition(a))}n.updateOrderStatus("Order Value -> "+(r/1e3).toFixed(1)+"K")}}},n.onSymbolSelect=function(e){var t=document.querySelectorAll('#holdingOrderDialog tr[rowid="HOLDING_ORDER-'+e.target.value+'"]');t&&t.length>0&&(t[0].scrollIntoView(),t[0].classList.remove("blinkRow"),setTimeout((function(e){document.querySelectorAll('#holdingOrderDialog tr[rowid="HOLDING_ORDER-'+e+'"]')[0].classList.add("blinkRow")}),50,e.target.value))},n.onOnderTypeChange=function(e){"orderType"==e.target.name&&n.setState({orderType:e.target.value})},n.setSortOrder=function(e){var t=n.state[e];n.setState({isSortPosition:!1,isSortOnValue:!1,isSortOnPriceChange:!1,isSortOnMISQty:!1,isSortOnDayQty:!1});var a={};a[e]=!t,n.setState(a)};var r={buyView:!0,sellView:!0,sellBuyCNCMISView:!1};r=void 0!=localStorage.getItem("holdingOrderWindowView")?JSON.parse(localStorage.getItem("holdingOrderWindowView")):r;var o=void 0!=localStorage.getItem("holdingRowOrder")?JSON.parse(localStorage.getItem("holdingRowOrder")):[];return n.rowfRefs={},n.state={orderWindowView:r,isHideDialog:!1,orderType:"MARKET",totaOrderRequest:void 0,totalFillOrderRequest:void 0,holdingOrder:o},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchPositionData(),this.fetchHoldingData(),this.updateOrderStatus("HOLDINGS"),this.interval=setInterval(this.fetchPositionData,2e3),this.holdinginterval=setInterval(this.fetchHoldingData,2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),clearInterval(this.holdinginterval),clearTimeout(this.misTimeout)}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=t.BSEtoNSEsymbolsMapping,o=t.hideHoldingOrderDialog,i=t.tableId,l=t.addToFavList,s=t.removeFromFavList,c=t.onTableRowclick,d=t.updateMarginData,u=this.state,m=u.orderStatus,p=u.orderWindowView,h=u.isHideDialog,y=u.positionsdata,f=u.holdingsdata,g=u.orderType,k=u.isSortPosition,E=u.isSortOnValue,b=u.isSortOnPriceChange,S=u.isSortOnDayQty,v=u.isSortOnMISQty,w=u.totalOrderRequest,O=u.totalFillOrderRequest,C=u.holdingOrder,T=[],R={},N=0,I=0;if(y&&f){for(var q=0;q<f.data.length;q++)n[f.data[q].tradingsymbol]&&(f.data[q].tradingsymbol=n[f.data[q].tradingsymbol]),R[f.data[q].tradingsymbol]={holding:f.data[q]};for(var M=0;M<y.data.net.length;M++)"CNC"==y.data.net[M].product&&void 0!=a.ticks[y.data.net[M].tradingsymbol]&&(void 0==R[y.data.net[M].tradingsymbol]?R[y.data.net[M].tradingsymbol]={dayCNC:y.data.net[M]}:R[y.data.net[M].tradingsymbol].dayCNC=y.data.net[M]);for(var D=0;D<y.data.net.length;D++)"MIS"==y.data.net[D].product&&void 0!=a.ticks[y.data.net[D].tradingsymbol]&&void 0!=R[y.data.net[D].tradingsymbol]&&(R[y.data.net[D].tradingsymbol].dayMIS=y.data.net[D]);T=Object.keys(R);for(var L=[],P=0;P<C.length;P++)void 0!=R[C[P]]&&L.push(C[P]);for(var _=0;_<T.length;_++)-1==L.indexOf(T[_])&&L.push(T[_]);I=(T=L).length;for(var F=0;F<T.length;F++){var x=R[T[F]];x.holding&&x.holding.quantity+x.holding.t1_quantity==0&&N++}if(k)T.sort((function(e,t){var a=R[e].holding?(R[e].holding.quantity+R[e].holding.t1_quantity)*R[e].holding.last_price-(R[e].holding.quantity+R[e].holding.t1_quantity)*R[e].holding.average_price:0,n=R[t].holding?(R[t].holding.quantity+R[t].holding.t1_quantity)*R[t].holding.last_price-(R[t].holding.quantity+R[t].holding.t1_quantity)*R[t].holding.average_price:0;return(a=isNaN(a)?0:a)-(n=isNaN(n)?0:n)}));else if(E)T.sort((function(e,t){var a=R[e].holding?(R[e].holding.quantity+R[e].holding.t1_quantity)*R[e].holding.last_price:0;return(R[t].holding?(R[t].holding.quantity+R[t].holding.t1_quantity)*R[t].holding.last_price:0)-a}));else if(b)if(void 0==this.previosChangeSortedOrder){var B=Object(H.a)(T);B.sort((function(e,t){return a.ticks[e].change-a.ticks[t].change})),T=B,this.previosChangeSortedOrder=B}else T=this.previosChangeSortedOrder;else S?T.sort((function(e,t){var a=R[e].dayCNC?R[e].dayCNC.quantity:0,n=R[t].dayCNC?R[t].dayCNC.quantity:0;return 0==a&&(a=-9999999),0==n&&(n=-9999999),n-a})):v&&T.sort((function(e,t){var a=R[e].dayMIS?R[e].dayMIS.quantity:0,n=R[t].dayMIS?R[t].dayMIS.quantity:0;return 0==a&&(a=-9999999),0==n&&(n=-9999999),n-a}))}var V="BUY",A="SELL";return void 0!=w&&(V="B(".concat(w,"/").concat(O,")"),A="S(".concat(w,"/").concat(O,")")),r.a.createElement("div",{id:"holdingOrderDialog",style:{display:h?"none":"block"},className:"modal"},r.a.createElement("div",{style:{width:"960px"},className:"modal-content"},r.a.createElement("div",{className:"orderStatusView"},m," ",r.a.createElement("div",{className:"openPosition"},"(",I-N,"/",I,")")),r.a.createElement("span",{onClick:o,className:"close"},"\xd7"),r.a.createElement("div",{className:"basket-orders holding-orders"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Select"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"PnL(%)"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Q(H)"),r.a.createElement("th",null,"Q(D)"),r.a.createElement("th",null,"Q(M)"),r.a.createElement("th",null,"Chg%"),r.a.createElement("th",null,"LTP"),r.a.createElement("th",null,"Qty"),r.a.createElement("th",null,"Price"),p.buyView&&r.a.createElement("th",null,"BUY"),p.sellView&&r.a.createElement("th",null,"SELL"),p.sellBuyCNCMISView&&r.a.createElement("th",null,"S-B"))),r.a.createElement("tbody",null,T.map((function(t,n){return r.a.createElement(le,{saveHoldingRowOrder:e.saveHoldingRowOrder,updateFillOrderRequest:e.updateFillOrderRequest,fetchPositionData:e.fetchPositionData,fetchHoldingData:e.fetchHoldingData,updateMarginData:d,positionsdata:R[t],ref:function(a){return e.rowfRefs["HOLDING_ORDER-"+t]=a},orderType:g,orderWindowView:p,onTableRowclick:c,addToFavList:l,removeFromFavList:s,tableId:i,updateOrderStatus:e.updateOrderStatus,key:"HOLDING_ORDER-"+t,kitedata:a,symbol:t})}))))),r.a.createElement("button",{className:"favButton",onClick:function(t){e.setState({isHideDialog:!0})},type:"button"},"H"),r.a.createElement("button",{className:"favButton",onClick:this.toogleSellView,type:"button"},"S"),r.a.createElement("button",{className:"favButton",onClick:this.toogleBuyView,type:"button"},"B"),r.a.createElement("button",{className:"favButton",onClick:this.toogleSellBuyCNCMISView,type:"button"},"S-B"),r.a.createElement("div",{style:{marginLeft:"10px"},className:"dropdown"},r.a.createElement("button",{style:{fontSize:"15px",backgroundColor:k||E||b||v||S?"red":"initial"},className:"dropbtn"},"Srt"),r.a.createElement("div",{className:"dropdown-content",style:{bottom:"0px"}},r.a.createElement("a",{style:{backgroundColor:k?"red":"initial"},onClick:function(t){e.setSortOrder("isSortPosition")}},"Loss"),r.a.createElement("a",{style:{backgroundColor:E?"red":"initial"},onClick:function(t){e.setSortOrder("isSortOnValue")}},"Total Value"),r.a.createElement("a",{style:{backgroundColor:b?"red":"initial"},onClick:function(t){e.previosChangeSortedOrder=void 0,e.setSortOrder("isSortOnPriceChange")}},"Change"),r.a.createElement("a",{style:{backgroundColor:S?"red":"initial"},onClick:function(t){e.setSortOrder("isSortOnDayQty")}},"Q(D)"),r.a.createElement("a",{style:{backgroundColor:v?"red":"initial"},onClick:function(t){e.setSortOrder("isSortOnMISQty")}},"Q(M)"))),r.a.createElement("button",{className:"favButton",onClick:this.onSQOFFClick,type:"button"},"HOLD SQOFF"),r.a.createElement("button",{className:"favButton",onClick:this.onTpriceClick,type:"button"},"Tpri"),r.a.createElement("button",{className:"favButton",onClick:this.fillQtyForValue,type:"button"},"Fill Qty"),r.a.createElement("button",{className:"favButton",onClick:this.exitSoldPosition,type:"button"},"Exit S"),r.a.createElement("div",{className:"orderType"},r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_MARKET",checked:"MARKET"==g,value:"MARKET"}),r.a.createElement("label",{for:"ORDER_TYPE_MARKET"},"M"),r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_LIMIT",checked:"LIMIT"==g,value:"LIMIT"}),r.a.createElement("label",{for:"ORDER_TYPE_LIMIT"},"L"),r.a.createElement("input",{type:"radio",name:"orderType",onClick:this.onOnderTypeChange,id:"ORDER_TYPE_SL_MARKET",checked:"SL_MARKET"==g,value:"SL_MARKET"}),r.a.createElement("label",{for:"ORDER_TYPE_SL_MARKET"},"SL_M")),r.a.createElement("select",{className:"selectSymbolsBasket",onChange:this.onSymbolSelect},T.map((function(e,t){return r.a.createElement("option",{value:e},e)}))),p.buyView&&r.a.createElement("button",{className:"builkOrderBtn favButton buyButton",onClick:this.placeBuyOrderForselectedRow,type:"button"},V),p.sellView&&r.a.createElement("button",{className:"builkOrderBtn favButton sellButton",onClick:this.placeSellOrderForselectedRow,type:"button"},A)))}}]),a}(r.a.Component),le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fillInputWithLatestPrice=function(){var e=n.props,t=e.kitedata,a=e.symbol;t.ticks[a].depth&&n.setState({quantity:0,price:t.ticks[a].lastTradedPrice})},n.fillQtyForValue=function(e){var t=n.props,a=t.kitedata,r=t.symbol,o=a.ticks[r].lastTradedPrice,i=Number.parseInt(e/o);return n.setState({quantity:i}),i*o},n.onInputValueChange=function(e){var t=n.state,a=t.quantity,r=t.price,o=t.isRowEnable;"quantity"==e.target.name?(a=e.target.value,n.setState({quantity:a})):"price"==e.target.name?(r=e.target.value,n.setState({price:r})):"checkbox"==e.target.name&&(o=e.target.checked,n.setState({isRowEnable:o}))},n.fillQtyValueOnSqOffClick=function(e){var t=n.props,a=t.positionsdata,r=t.kitedata,o=t.symbol,i=0;if(a&&a.holding){var l=Number.parseInt(Math.abs((a.holding.quantity+a.holding.t1_quantity)*e/100));n.setState({quantity:l}),0==l?n.markCheckBox(!1):n.markCheckBox(!0),i=l*r.ticks[o].lastTradedPrice}return i},n.exitSoldPosition=function(e){var t=n.props,a=t.positionsdata,r=t.kitedata,o=t.symbol,i=0;if(a&&a.dayCNC){var l=a.dayCNC.quantity;l=l<0?Number.parseInt(Math.abs(l*e/100)):0,n.setState({quantity:l}),0==l?n.markCheckBox(!1):n.markCheckBox(!0),i=l*r.ticks[o].lastTradedPrice}return i},n.fillPriceValueOnTpriceClick=function(e){var t=n.props,a=t.positionsdata,r=t.kitedata,o=t.symbol,i=n.state,l=i.quantity,s=i.price,c=0;if(a){var d=r.ticks[o].lastTradedPrice;s=d-d*e/100,n.setState({price:s.toFixed(1)}),c=l*s}return c},n.onOrderSuccess=function(e){var t=n.props,a=t.updateOrderStatus,r=t.updateMarginData,o=t.fetchPositionData,i=t.fetchHoldingData,l=t.updateFillOrderRequest,s=n.state.pendingOrderRequest;r(),o(),i(),a(e.data.order_id),n.setState({quantity:0,isRowEnable:!1,pendingOrderRequest:s-1}),n.markCheckBox(!1),l()},n.onOrderError=function(e){var t=n.props,a=t.updateOrderStatus,r=t.updateMarginData,o=t.fetchPositionData,i=t.fetchHoldingData,l=t.updateFillOrderRequest,s=n.state.pendingOrderRequest;r(),o(),i(),a(e.message),n.setState({quantity:0,isRowEnable:!1,pendingOrderRequest:s-1}),n.markCheckBox(!1),l()},n.markCheckBox=function(e){n.setState({isRowEnable:e})},n.isCheckBoxChecked=function(){return 1==n.state.isRowEnable},n.getPendingOrderRequest=function(){return n.state.pendingOrderRequest},n.getOrderValue=function(){var e=n.state,t=e.quantity,a=e.price;return Math.abs(t)*a},n.sendCNCMISSellBuyOrderRequest=function(){var e=n.state,t=e.quantity,a=e.price,r=e.pendingOrderRequest,o=n.props,i=o.kitedata,l=o.symbol,s=o.updateOrderStatus;"MARKET"==o.orderType?(O({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError),s(l+" -> SELL  -> MARKET -> CNC ->        Q: "+t+"   P: "+a),n.setState({quantity:0,pendingOrderRequest:r+2}),n.misTimeout=setTimeout((function(){I({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError),s(l+" -> BUY  -> MARKET -> MIS ->        Q: "+t+"   P: "+a)}),1300)):window.alert("ONLY MARKET ORDER ALLOWED")},n.sendBuyOrderRequest=function(){var e=n.state,t=e.quantity,a=e.price,r=e.pendingOrderRequest,o=n.props,i=o.kitedata,l=o.symbol,s=o.updateOrderStatus,c=o.orderType;"MARKET"==c?(w({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError),s(l+" -> BUY  -> MARKET -> CNC ->        Q: "+t+"   P: "+a)):"LIMIT"==c?(S({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"BUY",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError),s(l+" -> BUY  -> LIMIT -> CNC ->        Q: "+t+"   P: "+a)):"SL_MARKET"==c&&(C({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"BUY",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError),s(l+" -> BUY  -> SL-MARKET -> CNC ->        Q: "+t+"   TP: "+a)),n.setState({quantity:0,pendingOrderRequest:r+1})},n.sendSellOrderRequest=function(){var e=n.state,t=e.quantity,a=e.price,r=e.pendingOrderRequest,o=n.props,i=o.kitedata,l=o.symbol,s=o.updateOrderStatus,c=o.orderType;"MARKET"==c?(O({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"MARKET"},n.onOrderSuccess,n.onOrderError),s(l+" -> SELL  -> MARKET -> CNC ->        Q: "+t+"   P: "+a)):"LIMIT"==c?(v({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,quantity:t,transaction_type:"SELL",order_type:"LIMIT"},n.onOrderSuccess,n.onOrderError),s(l+" -> SELL  -> LIMIT -> CNC ->        Q: "+t+"   P: "+a)):"SL_MARKET"==c&&(T({exchange:i.ticks[l].exchange,tradingsymbol:l,price:a,trigger_price:a,quantity:t,transaction_type:"SELL",order_type:"SL-M"},n.onOrderSuccess,n.onOrderError),s(l+" -> SELL  -> SL-MARKET -> CNC ->        Q: "+t+"   TP: "+a)),n.setState({quantity:0,pendingOrderRequest:r+1})},n.openStockInfo=function(){n.props.onTableRowclick(n.props.symbol)},n.state={isRowEnable:!1,pendingOrderRequest:0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fillInputWithLatestPrice()}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){clearTimeout(this.misTimeout)}},{key:"render",value:function(){var e=this,t=this.props,a=t.kitedata,n=t.symbol,o=(t.tableId,t.addToFavList,t.removeFromFavList,t.onTableRowclick,t.orderWindowView),i=t.positionsdata,l=t.saveHoldingRowOrder,s=this.state,c=s.quantity,d=s.price,u=s.isRowEnable,m=s.pendingOrderRequest,p="";a.ticks[n]&&(p=a.ticks[n].change<0?"red":"green");var h={};u&&(h.backgroundColor="grey");var y={};0!=m&&(y.backgroundColor="gold");var f=0,g=0,k=0,E=0,b=0,S=0;i&&i.holding&&(g=(100*(f=(i.holding.quantity+i.holding.t1_quantity)*i.holding.last_price-(i.holding.quantity+i.holding.t1_quantity)*i.holding.average_price)/((i.holding.quantity+i.holding.t1_quantity)*i.holding.average_price)).toFixed(0),g=isNaN(g)?0:g,k=(i.holding.quantity+i.holding.t1_quantity)*i.holding.last_price,E=i.holding.quantity+i.holding.t1_quantity),i&&i.dayCNC&&(b=i.dayCNC.quantity),i&&i.dayMIS&&(S=i.dayMIS.quantity);var v=f<0?"red":"green",w=b<0?"red":"green",O=S<0?"red":"green";return r.a.createElement("tr",{style:y,rowId:"HOLDING_ORDER-"+n},r.a.createElement("td",{onClick:function(t){e.setState({isRowEnable:!u})},style:h},r.a.createElement("input",{tabIndex:"-1",style:{width:"20px",height:"20px"},onChange:this.onInputValueChange,type:"checkbox",name:"checkbox",checked:u})),r.a.createElement("td",{onDoubleClick:function(e){l(n)}},n),r.a.createElement("td",{className:v},(f/1e3).toFixed(2),"k\xa0",r.a.createElement("span",{className:"holdPercGain"},"(",g,"%)")),r.a.createElement("td",null,Math.round(k/1e3),"k"),r.a.createElement("td",null,E),r.a.createElement("td",{className:w},0==b?"":b),r.a.createElement("td",{className:O},0==S?"":S),r.a.createElement("td",{onClick:this.openStockInfo,className:p},a.ticks[n].change.toFixed(2),"%"),r.a.createElement("td",null,a.ticks[n].lastTradedPrice),r.a.createElement("td",null,r.a.createElement("input",{type:"number",autoComplete:"off",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"quantity",step:1,name:"quantity",min:"1",max:"1000",value:c})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",tabIndex:"-1",autoComplete:"off",onClick:function(e){return e.target.select()},onInput:this.onInputValueChange,className:"price",step:.2,name:"price",min:"1",max:"10000",value:d})),o.buyView&&r.a.createElement("td",null,r.a.createElement("button",{style:{backgroundColor:0!=m?"grey":"green"},className:"buyButton",onClick:this.sendBuyOrderRequest}," BUY ")),o.sellView&&r.a.createElement("td",null," ",r.a.createElement("button",{style:{backgroundColor:0!=m?"grey":"#e86666"},className:"sellButton",onClick:this.sendSellOrderRequest}," SELL ")),o.sellBuyCNCMISView&&r.a.createElement("td",null," ",r.a.createElement("button",{style:{backgroundColor:0!=m?"grey":"yellow"},className:"sellBuyButton",onClick:this.sendCNCMISSellBuyOrderRequest}," S->B ")))}}]),a}(r.a.Component),se=a(63),ce=a.n(se),de=(a(175),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).showToast=function(e,t){if(n.state.isShowNotification){if(n.alertMap.hasOwnProperty(t)&&Date.now()-n.alertMap[t]<6e5)return;E.a.notify(e,{position:"bottom-left",duration:1e5}),n.alertMap[t]=Date.now()}},n.updateMarginData=function(){var e,t;e=n.onMarginSuccess,t=n.onMarginError,fetch("https://kite.zerodha.com/oms/user/margins",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:window.authKey}}).then((function(e){return e.json()})).then((function(a){"success"==a.status?e(a):"error"==a.status&&t(a)})).catch((function(e){console.error(e),t(e)}))},n.onMarginSuccess=function(e){n.setState({margin:e})},n.onMarginError=function(){},n.showBasketOrderDialog=function(){n.setState({isShowBasketOrderDialog:!0}),n.basketOrderDialogRef&&n.basketOrderDialogRef.showDialog()},n.hideBasketOrderDialog=function(){n.setState({isShowBasketOrderDialog:void 0})},n.showHoldingOrderDialog=function(){n.setState({isShowHoldingOrderDialog:!0}),n.holdingOrderDialogRef&&n.holdingOrderDialogRef.showDialog()},n.hideHoldingOrderDialog=function(){n.setState({isShowHoldingOrderDialog:void 0})},n.hideStokInfo=function(){n.setState({stockInfo:void 0})},n.hideFundamentalsDialog=function(){n.setState({showFundamental:void 0})},n.showFundamentalsDialog=function(e){n.setState({showFundamental:e})},n.escFunction=function(e){27===e.keyCode&&(n.hideStokInfo(),n.hideBasketOrderDialog(),n.hideFundamentalsDialog(),n.hideHoldingOrderDialog())},n.refreshKiteTicksData=function(){fetch(window.domain+"kiteticks.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.state.isLoadOldPrice?this.kitedata=this.kiteOldPriceData:this.kitedata=e,this.setState({kitedata:this.kitedata,investingdata:this.investingdata,positionsdata:this.positionsdata,holdingsdata:this.holdingsdata,kiteAllSymbols:this.kiteAllSymbols})}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.refreshData=function(){fetch(window.domain+"changes.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.investingdata=e}.bind(Object(c.a)(n))).catch((function(e){console.error(e)})),fetch(window.domain+"positions.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.positionsdata=e}.bind(Object(c.a)(n))).catch((function(e){console.error(e)})),fetch(window.domain+"holdings.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.holdingsdata=e}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.randomFloat=function(e,t){return e+(t-e)*Math.random()},n.createDummyTicks=function(){for(var e=Object.keys(n.kitedata.ticks),t=e.length,a=0;a<10;a++){var r=0+Math.floor((t-0)*Math.random());n.kitedata.ticks[e[r]].lastTradedPrice=n.randomFloat(0,500),n.kitedata.ticks[e[r]].change=n.randomFloat(0,8)}},n.onFetchMarketQuoteSuccess=function(e){if(n.quoteData)for(var t=Object.keys(e.data),a=0;a<t.length;a++)n.quoteData[t[a]]=e.data[t[a]];else n.quoteData=e.data},n.onFetchMarketQuoteError=function(e){window.alert("Error to fetch Market Quotes")},n.fetchMarketQuote=function(){if(n.kitedata)for(var e=n.kitedata.ticks,t=Object.keys(e),a="",r=0;r<t.length;r++)a+="i="+e[t[r]].exchange+":"+e[t[r]].tradingsymbol+"&",499!=r&&r!=t.length-1||(K(a,n.onFetchMarketQuoteSuccess,n.onFetchMarketQuoteError),a="");else window.alert("Unable to fetch Market Quotes")},n.fetchBSEtoNSEmaapingList=function(){fetch(window.domain+"BSEtoNSEsymbolsMapping.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.BSEtoNSEsymbolsMapping=e,this.setState({BSEtoNSEsymbolsMapping:this.BSEtoNSEsymbolsMapping})}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.fetchAllKiteSymbolsList=function(){fetch(window.domain+"kiteAllSymbols.json?v="+(new Date).getTime()).then((function(e){return e.json()})).then(function(e){this.kiteAllSymbols=e,this.setState({kiteAllSymbols:this.kiteAllSymbols})}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.fetchRecentCalenderCSVFile=function(){fetch(window.domain+"output/result-calendar.csv?v="+(new Date).getTime()).then((function(e){return e.text()})).then(function(e){if(void 0!=this.kitedata&&void 0!=this.holdingsdata){for(var t={},a=0;a<this.holdingsdata.data.length;a++)t[this.holdingsdata.data[a].tradingsymbol]=!0;for(var n=e.split("\n"),r={},o=0;o<n.length;o++)if(n[o].trim().length>0){var i=n[o].trim().split(",")[0].toUpperCase(),l=n[o].trim().split(",")[1];if(void 0!=this.kitedata.ticks[i]){new Date(n[o].trim().split(",")[1]);void 0==r[l]&&(r[l]=[]),r[l].push({symbol:i,date:new Date(l).toDateString(),inHolding:t[i]})}}this.setState({recentResultCalender:r})}else window.alert("Upcoming results not loaded")}.bind(Object(c.a)(n))).catch((function(e){console.error(e)}))},n.saveCurrentPrice=function(){localStorage.setItem("kiteOldChanges.json",JSON.stringify(n.kitedata))},n.onTableRowclick=function(e,t,a){var r=n.state.symbolSelector;r.isShow&&[0,1,2,3,"MIS","RES"].includes(t)&&(r.cursor=e,document.getElementById("portfolioInput").value=t),n.setState({stockInfo:{symbol:e,tableId:t,isOpenGraph:a},symbolSelector:r})},n.onSelectorInput=function(e){var t=document.getElementById("inputSymbol").value;if(n.state.kiteAllSymbols.allSymbols.filter((function(e){return e.tradingsymbol.toUpperCase()==t.toUpperCase()})).length>0||"SEPERATOR"==t.toUpperCase()){var a=document.getElementById("portfolioInput").value,r=n.state.symbolSelector.isAdd;["0","1","2","3","MIS","RES"].includes(a)&&(r?n.addToFavList(t,a):n.removeFromFavList(t,a)),document.getElementById("inputSymbol").select()}},n.getFavSymbols=function(e){switch(e){case"0":return n.state.favSymbols;case"1":return n.state.favSymbols1;case"2":return n.state.favSymbols2;case"3":return n.state.favSymbols3;case"MIS":return n.state.kiteBasketOrderData;case"RES":return n.state.resultCalenderData}},n.setFavSymbols=function(e,t){switch(e){case"0":n.setState({favSymbols:t}),localStorage.setItem("kite_favSymbols",JSON.stringify(t));break;case"1":n.setState({favSymbols1:t}),localStorage.setItem("kite_favSymbols1",JSON.stringify(t));break;case"2":n.setState({favSymbols2:t}),localStorage.setItem("kite_favSymbols2",JSON.stringify(t));break;case"3":n.setState({favSymbols3:t}),localStorage.setItem("kite_favSymbols3",JSON.stringify(t));break;case"MIS":n.setState({kiteBasketOrderData:t}),localStorage.setItem("kiteBasketOrderData.json",JSON.stringify(t));break;case"RES":n.setState({resultCalenderData:t}),localStorage.setItem("kite_resultCalender",JSON.stringify(t))}},n.addToFavList=function(e,t){t=void 0==t?"":t+"";var a=n.getFavSymbols(t);if("SEPERATOR"!=e&&(a=a.filter((function(t,a){return t!=e}))),"SEPERATOR"==e||n.state.kitedata.ticks[e]){var r=n.state.symbolSelector.cursor?n.state.symbolSelector.cursor:"",o=a.indexOf(r);o>=0?a.splice(o,0,e):a.unshift(e),n.setFavSymbols(t,a)}"SEPERATOR"==e||n.state.kitedata.ticks[e]||console.error(e)},n.removeFromFavList=function(e,t){t=void 0==t?"":t+"";var a=n.getFavSymbols(t);if("SEPERATOR"!=e)a=a.filter((function(t,a){return t!=e}));else{var r=n.state.symbolSelector.cursor?n.state.symbolSelector.cursor:"",o=a.indexOf(r);a.splice(o+1,1)}n.setFavSymbols(t,a)},n.updateKitePerfData=function(e,t,a){var r=n.state.kitePerfData;void 0==r[e]&&(r[e]={}),r[e][t]=a,localStorage.setItem("kitePerfData.json",JSON.stringify(r)),n.setState({kitePerfData:r})},n.handleChange=function(e,t,a,n){localStorage.setItem("editorText",n.getHTML())};var r=void 0!=localStorage.getItem("kite_favSymbols")?JSON.parse(localStorage.getItem("kite_favSymbols")):[],o=void 0!=localStorage.getItem("kite_favSymbols1")?JSON.parse(localStorage.getItem("kite_favSymbols1")):[],i=void 0!=localStorage.getItem("kite_favSymbols2")?JSON.parse(localStorage.getItem("kite_favSymbols2")):[],s=void 0!=localStorage.getItem("kite_favSymbols3")?JSON.parse(localStorage.getItem("kite_favSymbols3")):[],d=void 0!=localStorage.getItem("kitePerfData.json")?JSON.parse(localStorage.getItem("kitePerfData.json")):[],u=void 0!=localStorage.getItem("kiteBasketOrderData.json")?JSON.parse(localStorage.getItem("kiteBasketOrderData.json")):[];n.kiteOldPriceData=void 0!=localStorage.getItem("kiteOldChanges.json")?JSON.parse(localStorage.getItem("kiteOldChanges.json")):[];var m=void 0!=localStorage.getItem("kite_resultCalender")?JSON.parse(localStorage.getItem("kite_resultCalender")):[];return n.state={isShowEditor:!1,isShowResults:!1,isShowMIS:!1,isShowNotification:!0,isShowGL:!0,favSymbols:r,favSymbols1:o,favSymbols2:i,favSymbols3:s,kitePerfData:d,kiteBasketOrderData:u,symbolSelector:{cursor:void 0,isAdd:!0,isShow:!1},isLoadOldPrice:!1,resultCalenderData:m},n.alertMap={},n.indexSymbols=["NIFTY 50","NIFTY BANK","INDIA VIX","NIFTY IT","NIFTY AUTO","NIFTY PHARMA","NIFTY FMCG","NIFTY METAL","NIFTY CONSUMPTION","NIFTY PSU BANK","NIFTY PVT BANK","NIFTY REALTY","NIFTY INFRA","NIFTY ENERGY","NIFTY NEXT 50","NIFTY MIDCAP 100","NIFTY SMLCAP 100"],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchAllKiteSymbolsList(),this.fetchBSEtoNSEmaapingList(),this.resCalenderTimout=setTimeout(this.fetchRecentCalenderCSVFile,5e3),this.marketQuoteTimeout=setTimeout(this.fetchMarketQuote,5e3),this.updateMarginData(),this.refreshData(),this.refreshKiteTicksData(),this.interval=setInterval(this.refreshData,1200),this.kiteTickinterval=setInterval(this.refreshKiteTicksData,800),document.addEventListener("keyup",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.escFunction,!1),clearInterval(this.interval),clearInterval(this.kiteTickinterval),clearTimeout(this.resCalenderTimout),clearTimeout(this.fetchMarketQuote)}},{key:"bringElementInView",value:function(e){document.querySelectorAll(e)&&document.querySelectorAll(e)[0]&&document.querySelectorAll(e)[0].scrollIntoView()}},{key:"render",value:function(){var e=this,t=this.state,a=t.kitedata,n=t.investingdata,o=t.positionsdata,i=t.holdingsdata,l=t.favSymbols,s=t.favSymbols1,c=t.favSymbols2,d=t.favSymbols3,u=t.kitePerfData,p=t.stockInfo,y=t.isShowBasketOrderDialog,g=t.isShowHoldingOrderDialog,k=t.kiteBasketOrderData,E=t.symbolSelector,S=t.kiteAllSymbols,v=t.showFundamental,w=t.resultCalenderData,O=t.margin,C=t.isShowGL,T=t.isShowMIS,R=t.isShowResults,N=t.recentResultCalender,I=t.isShowEditor,q=t.BSEtoNSEsymbolsMapping,M=[],D=[];if(a){for(var L=Object.keys(a.ticks),P=[],_=0;_<L.length;_++)"NFO"!=a.ticks[L[_]].exchange&&P.push(L[_]);if(C){P.sort((function(e,t){return a.ticks[t].change-a.ticks[e].change}));for(var F=0;F<P.length&&!(a.ticks[P[F]].change<2);F++)M.push(P[F]);for(var x=P.length-1;x>=0&&!(a.ticks[P[x]].change>-2);x--)D.push(P[x])}else{P.sort((function(e,t){return 100*(a.ticks[e].highPrice-a.ticks[e].lastTradedPrice)/a.ticks[e].highPrice-100*(a.ticks[t].highPrice-a.ticks[t].lastTradedPrice)/a.ticks[t].highPrice}));for(var B=0;B<P.length;B++){if(100*(a.ticks[P[B]].highPrice-a.ticks[P[B]].lastTradedPrice)/a.ticks[P[B]].highPrice>6)break;M.push(P[B])}P.sort((function(e,t){return 100*(a.ticks[e].lastTradedPrice-a.ticks[e].lowPrice)/a.ticks[e].lowPrice-100*(a.ticks[t].lastTradedPrice-a.ticks[t].lowPrice)/a.ticks[t].lowPrice}));for(var V=0;V<P.length;V++){if(100*(a.ticks[P[V]].lastTradedPrice-a.ticks[P[V]].lowPrice)/a.ticks[P[V]].lowPrice>6)break;D.push(P[V])}}}var A={};if(a&&n){var j=n.time,K=a.time,Q=new Date,H=60*Q.getHours()+Q.getMinutes();Math.abs(H-j)>5||Math.abs(H-K)>5?A.display="block":A.display="none"}return r.a.createElement("div",null,r.a.createElement("div",{style:A,className:"feed-status"}),a&&i&&o&&q&&r.a.createElement("div",{className:"tableContainer holding"},r.a.createElement(f,{BSEtoNSEsymbolsMapping:q,kitedata:a,margin:O,onTableRowclick:this.onTableRowclick,positionsdata:o,holdingsdata:i})),a&&n&&r.a.createElement("div",{className:"indexColumn"},r.a.createElement("div",{className:"tableContainer niftyIndex"},r.a.createElement(m,{showToast:this.showToast,onTableRowclick:this.onTableRowclick,kitePerfData:u,kitedata:a,symbolList:this.indexSymbols})),r.a.createElement("div",{className:"tableContainer index"},r.a.createElement(h,{investingdata:n})),r.a.createElement("div",{className:"tableContainer watchlistclass"},r.a.createElement(m,{showToast:this.showToast,tableId:3,onTableRowclick:this.onTableRowclick,kitePerfData:u,kitedata:a,symbolList:d}))),a&&r.a.createElement("div",{className:"tableContainer loser"},r.a.createElement(m,{showToast:this.showToast,onTableRowclick:this.onTableRowclick,kitedata:a,symbolList:D})),a&&r.a.createElement("div",{className:"tableContainer gainers"},r.a.createElement(m,{showToast:this.showToast,onTableRowclick:this.onTableRowclick,kitedata:a,symbolList:M})),a&&r.a.createElement("div",{className:"tableContainer watchlistclass"},r.a.createElement(m,{showToast:this.showToast,tableId:0,onTableRowclick:this.onTableRowclick,kitePerfData:u,kitedata:a,symbolList:l})),a&&r.a.createElement("div",{className:"tableContainer watchlistclass"},r.a.createElement(m,{recentResultCalender:N,resultCalenderData:R?w:void 0,kiteBasketOrderData:T?k:void 0,showToast:this.showToast,tableId:1,onTableRowclick:this.onTableRowclick,kitePerfData:u,kitedata:a,symbolList:s})),a&&r.a.createElement("div",{className:"tableContainer watchlistclass"},r.a.createElement(m,{showToast:this.showToast,tableId:2,onTableRowclick:this.onTableRowclick,kitePerfData:u,kitedata:a,symbolList:c})),p&&r.a.createElement(U,{isOpenGraph:p.isOpenGraph,positionsdata:o,holdingsdata:i,quoteData:this.quoteData,updateMarginData:this.updateMarginData,showFundamentalsDialog:this.showFundamentalsDialog,addToFavList:this.addToFavList,removeFromFavList:this.removeFromFavList,hideStokInfo:this.hideStokInfo,stockInfo:p,updateKitePerfData:this.updateKitePerfData,kitePerfData:u,kitedata:a}),y&&r.a.createElement(Y,{updateMarginData:this.updateMarginData,ref:function(t){return e.basketOrderDialogRef=t},positionsdata:o,onTableRowclick:this.onTableRowclick,addToFavList:this.addToFavList,removeFromFavList:this.removeFromFavList,kiteBasketOrderData:k,hideBasketOrderDialog:this.hideBasketOrderDialog,kitedata:a}),g&&q&&r.a.createElement(ie,{BSEtoNSEsymbolsMapping:q,updateMarginData:this.updateMarginData,ref:function(t){return e.holdingOrderDialogRef=t},positionsdata:o,holdingsdata:i,onTableRowclick:this.onTableRowclick,addToFavList:this.addToFavList,removeFromFavList:this.removeFromFavList,hideHoldingOrderDialog:this.hideHoldingOrderDialog,kitedata:a}),r.a.createElement(J,null),v&&r.a.createElement(G,{symbol:v,hideFundamentalsDialog:this.hideFundamentalsDialog,kitedata:a}),I&&r.a.createElement(ce.a,{theme:"snow",defaultValue:localStorage.getItem("editorText"),onChange:this.handleChange}),r.a.createElement("div",{className:"tool-bar"},r.a.createElement("button",{type:"button",onClick:this.saveCurrentPrice},"SAVE"),r.a.createElement("button",{type:"button",style:{backgroundColor:this.state.isLoadOldPrice?"red":"initial"},onClick:function(t){e.kiteOldPriceData=void 0!=localStorage.getItem("kiteOldChanges.json")?JSON.parse(localStorage.getItem("kiteOldChanges.json")):[],e.setState({isLoadOldPrice:!e.state.isLoadOldPrice})}},this.state.isLoadOldPrice?"NEW":"OLD"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"fontBold",onClick:this.showBasketOrderDialog},"MIS"),r.a.createElement(X,{kitedata:a,onTableRowclick:this.onTableRowclick,showToast:this.showToast}),r.a.createElement(oe,{addToFavList:this.addToFavList,kitedata:a,onTableRowclick:this.onTableRowclick}),r.a.createElement("button",{type:"button",onClick:function(t){E.isShow=!E.isShow,e.setState({symbolSelector:E})}},E.isShow?r.a.createElement(z.g,{className:"appicon"}):r.a.createElement(z.d,{className:"appicon"})),r.a.createElement("button",{type:"button",style:{backgroundColor:this.state.isShowNotification?"initial":"red"},onClick:function(t){var a;a=!e.state.isShowNotification,b=a,e.setState({isShowNotification:!e.state.isShowNotification})}},this.state.isShowNotification?r.a.createElement(z.e,{className:"appicon"}):r.a.createElement(z.f,{className:"appicon"})),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropbtn"},"SEC"),r.a.createElement("div",{className:"dropdown-content secFilter"},r.a.createElement("a",{style:{backgroundColor:T?"green":"red"},onClick:function(t){e.setState({isShowMIS:!T}),T||setTimeout(e.bringElementInView,500,"tr[rowid='MIS-MISSCRIPTS']")}},"MIS"),r.a.createElement("a",{style:{backgroundColor:R?"green":"red"},onClick:function(t){e.setState({isShowResults:!R}),R||setTimeout(e.bringElementInView,500,"tr[rowid='RES-RESCALENDER']")}},"Result"),r.a.createElement("a",null),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-HDFCBANK']")}},"Bank"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-HINDUNILVR']")}},"Fmcg"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-TCS']")}},"IT"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-MARUTI']")}},"Auto"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-AARTIIND']")}},"Chemical"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-DLF']")}},"Real state"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-FRETAIL']")}},"Retail"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-TAJGVK']")}},"Hotel"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-GMM']")}},"MNC"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-LUPIN']")}},"Pharma"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-RADICO']")}},"Alcohol"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-KEI']")}},"Cable"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-VEDL']")}},"Metal"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-HINDPETRO']")}},"Oil"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-AVANTIFEED']")}},"Food"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-JKPAPER']")}},"Paper"),r.a.createElement("a",{onClick:function(t){e.bringElementInView("tr[rowid='2-ULTRACEMCO']")}},"Cement"))),r.a.createElement("button",{style:{backgroundColor:C?"initial":"red"},type:"button",onClick:function(t){e.setState({isShowGL:!e.state.isShowGL})}},C?"N-HL":"GL"),r.a.createElement("button",{type:"button",onClick:function(t){e.setState({isShowEditor:!I})}},r.a.createElement(z.b,{className:"appicon"})),r.a.createElement("button",{type:"button",onClick:this.showHoldingOrderDialog},"HOLD")),E.isShow&&S&&r.a.createElement("div",{className:"symbolSelector"},r.a.createElement("button",{className:"addRemove",style:{backgroundColor:E.isAdd?"green":"red"},onClick:function(t){E.isAdd=!E.isAdd,e.setState({symbolSelector:E})},type:"button"},E.isAdd?r.a.createElement(z.a,{className:"appicon"}):r.a.createElement(z.h,{className:"appicon"})),r.a.createElement("input",{type:"text",onInput:this.onSelectorInput,id:"inputSymbol",list:"inputdlist"}),r.a.createElement("datalist",{id:"inputdlist"},S.allSymbols.map((function(e,t){if("NFO"!=e.exchange)return r.a.createElement("option",{key:e.tradingsymbol,value:e.tradingsymbol},e.name);if("NIFTY"==e.name||"BANKNIFTY"==e.name){if("NFO-OPT"==e.segment){var a=e.name+" "+e.expiry.split(" ")[0]+" "+e.strike+" "+e.instrument_type+" | "+e.expiry.split(" ")[1]+" "+e.expiry.split(" ")[2];return r.a.createElement("option",{key:e.tradingsymbol,value:e.tradingsymbol},a)}if("NFO-FUT"==e.segment){var n=e.name+" "+e.expiry.split(" ")[0]+" "+e.expiry.split(" ")[1]+" "+e.instrument_type;return r.a.createElement("option",{key:e.tradingsymbol,value:e.tradingsymbol},n)}}})),r.a.createElement("option",{key:"SEPERATOR",value:"SEPERATOR"},"SEPERATOR")),r.a.createElement("input",{type:"text",id:"portfolioInput",list:"portfolioList"}),r.a.createElement("datalist",{id:"portfolioList"},r.a.createElement("option",{value:0},"0"),r.a.createElement("option",{value:1},"1"),r.a.createElement("option",{value:2},"2"),r.a.createElement("option",{value:3},"3"),r.a.createElement("option",{value:"MIS"},"MIS"),r.a.createElement("option",{value:"RES"},"RES")),r.a.createElement("label",{className:"cursor"},E.cursor)))}}]),a}(r.a.Component));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root"))},64:function(e,t,a){e.exports=a(176)},69:function(e,t,a){},7:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.87fdc7b7.chunk.js.map